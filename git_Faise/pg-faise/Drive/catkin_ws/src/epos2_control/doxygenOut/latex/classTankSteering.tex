\hypertarget{classTankSteering}{\section{Tank\-Steering Class Reference}
\label{classTankSteering}\index{Tank\-Steering@{Tank\-Steering}}
}


Tank\-Steering-\/\-Class.  




{\ttfamily \#include $<$Tank\-Steering.\-h$>$}

\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structTankSteering_1_1distanceStruct}{distance\-Struct}
\begin{DoxyCompactList}\small\item\em structure with all values to restrict the velocity depending on the laser-\/scanner-\/data. \end{DoxyCompactList}\item 
struct \hyperlink{structTankSteering_1_1odom}{odom}
\begin{DoxyCompactList}\small\item\em structure with all data to calculate the current position depending on odometry-\/data \end{DoxyCompactList}\item 
struct \hyperlink{structTankSteering_1_1orientation}{orientation}
\begin{DoxyCompactList}\small\item\em describing the orientation of the robot in a 2\-D-\/case depending to a parent-\/frame \end{DoxyCompactList}\item 
struct \hyperlink{structTankSteering_1_1tankSet}{tank\-Set}
\begin{DoxyCompactList}\small\item\em Settings Structure with all relevant values and R\-O\-S. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
enum \{ {\bfseries left}, 
{\bfseries right}
 \}
\begin{DoxyCompactList}\small\item\em enumeration for naming the E\-P\-O\-S2s \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classTankSteering_ad7e373315c8b6b1993a67ff269dd4817}{Tank\-Steering} (ros\-::\-Node\-Handle roshandle, \hyperlink{classEpos2MotorController}{Epos2\-Motor\-Controller} $\ast$epos\mbox{[}2\mbox{]}, double wheel\-Perimeter, double axis\-Length, double max\-M\-P\-S, double odom\-Duration=0.\-05, double velocity\-Duration=0.\-07)
\begin{DoxyCompactList}\small\item\em constructor of Tank\-Steering-\/\-Class. \end{DoxyCompactList}\item 
\hyperlink{classTankSteering_a598a4efa2896aa382ed7fe9af6e22519}{$\sim$\-Tank\-Steering} ()
\begin{DoxyCompactList}\small\item\em Destructor of the Tank\-Steering-\/class. \end{DoxyCompactList}\item 
void \hyperlink{classTankSteering_ac07cb26cfc52f615863d6fdaef924131}{init\-Laserscanner} (int range=180, double low=0.\-15, double high=0.\-6)
\begin{DoxyCompactList}\small\item\em Initialized the parameters for using the laser-\/scanner to avoid crashing into obstacles in front of the robot. \end{DoxyCompactList}\item 
int \hyperlink{classTankSteering_a89990f8796af8d4224752c0e0a0daf47}{sign} (double number)
\begin{DoxyCompactList}\small\item\em return if a value is positive, zero or negative \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classTankSteering_a1ee9bb43163695018d65f8dbda46c050}{drive\-Callback\-M\-P\-S} (const epos2\-\_\-control\-::velocity speed)
\begin{DoxyCompactList}\small\item\em velocity-\/\-Callback-\/function -\/ will be called if a speed-\/message (velocity left and right) was sent \end{DoxyCompactList}\item 
void \hyperlink{classTankSteering_a7d071ca7df1b04000275255114d9ff63}{drive\-Callback} (const geometry\-\_\-msgs\-::\-Twist velocity\-Vector)
\begin{DoxyCompactList}\small\item\em velocity-\/\-Callback-\/function -\/ will be called if a twist message was sent \end{DoxyCompactList}\item 
void \hyperlink{classTankSteering_ab1335cf95b773d0b8908d74ebb61c289}{set\-Velocity\-Callback} (const ros\-::\-Timer\-Event \&event)
\begin{DoxyCompactList}\small\item\em velocity-\/callback-\/function -\/ every time called it will set the target\-Velocity to both E\-P\-O\-S2 \end{DoxyCompactList}\item 
void \hyperlink{classTankSteering_ae19dbe86e3ae541c06525af2721a37dd}{odom\-Callback} (const ros\-::\-Timer\-Event \&event)
\begin{DoxyCompactList}\small\item\em odom-\/callback-\/function -\/ reads out the current position of both motors connected to the E\-P\-O\-S2s and calculate the odometry-\/data \end{DoxyCompactList}\item 
void \hyperlink{classTankSteering_a724c44b283936129841b91ecdcdb6235}{Laser\-Scan\-Callback} (const sensor\-\_\-msgs\-::\-Laser\-Scan sensor\-Data)
\begin{DoxyCompactList}\small\item\em laser-\/scanner-\/callback -\/ will be called if the laser-\/scanner-\/node send new point-\/cloud-\/data \end{DoxyCompactList}\item 
void \hyperlink{classTankSteering_aed4cd5e319cd5c9cd95b835f1615eb0d}{get\-Device\-Error\-Callback} (const ros\-::\-Timer\-Event \&event)
\begin{DoxyCompactList}\small\item\em error-\/callback -\/ will be called continuously and check both E\-P\-O\-S2 on Errors. \end{DoxyCompactList}\item 
int \hyperlink{classTankSteering_a32596c18de1130cad7e926e3182f12c4}{init} ()
\begin{DoxyCompactList}\small\item\em Initialized both E\-P\-O\-S2 and setup all R\-O\-S components. \end{DoxyCompactList}\item 
void \hyperlink{classTankSteering_a99aadf750c50610cfea8732f95e21426}{reset\-E\-P\-O\-S2\-Fault} ()
\begin{DoxyCompactList}\small\item\em bring the E\-P\-O\-S2 into a drive-\/able state. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{struct \hyperlink{structTankSteering_1_1tankSet}{Tank\-Steering\-::tank\-Set} \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tank\-Settings}}\label{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}

\begin{DoxyCompactList}\small\item\em Main Settings for tank-\/steering a robot with two E\-P\-O\-S2. \end{DoxyCompactList}\item 
\hypertarget{classTankSteering_a63ff23d449dca437f90e16f3a3684c20}{struct \hyperlink{structTankSteering_1_1distanceStruct}{Tank\-Steering\-::distance\-Struct} \hyperlink{classTankSteering_a63ff23d449dca437f90e16f3a3684c20}{Laser\-Distance}}\label{classTankSteering_a63ff23d449dca437f90e16f3a3684c20}

\begin{DoxyCompactList}\small\item\em Settings to restrict the velocity in front of obstacles. \end{DoxyCompactList}\item 
\hypertarget{classTankSteering_ae08d9f507d6de01a86f59aa135283abc}{struct \hyperlink{structTankSteering_1_1odom}{Tank\-Steering\-::odom} \hyperlink{classTankSteering_ae08d9f507d6de01a86f59aa135283abc}{pos}}\label{classTankSteering_ae08d9f507d6de01a86f59aa135283abc}

\begin{DoxyCompactList}\small\item\em Temporary memory for the odometry-\/calculation. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Tank\-Steering-\/\-Class. 

It's used to control two E\-P\-O\-S2 while each one drive on side of a robot. Steering will be done by a difference between the velocities for both sides. 

Definition at line 24 of file Tank\-Steering.\-h.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{classTankSteering_ad7e373315c8b6b1993a67ff269dd4817}{\index{Tank\-Steering@{Tank\-Steering}!Tank\-Steering@{Tank\-Steering}}
\index{Tank\-Steering@{Tank\-Steering}!TankSteering@{Tank\-Steering}}
\subsubsection[{Tank\-Steering}]{\setlength{\rightskip}{0pt plus 5cm}Tank\-Steering\-::\-Tank\-Steering (
\begin{DoxyParamCaption}
\item[{ros\-::\-Node\-Handle}]{roshandle, }
\item[{{\bf Epos2\-Motor\-Controller} $\ast$}]{epos\mbox{[}2\mbox{]}, }
\item[{double}]{wheel\-Perimeter, }
\item[{double}]{axis\-Length, }
\item[{double}]{max\-M\-P\-S, }
\item[{double}]{odom\-Duration = {\ttfamily 0.05}, }
\item[{double}]{velocity\-Duration = {\ttfamily 0.07}}
\end{DoxyParamCaption}
)}}\label{classTankSteering_ad7e373315c8b6b1993a67ff269dd4817}


constructor of Tank\-Steering-\/\-Class. 

Initialized all values without the laser-\/scanner-\/data.


\begin{DoxyParams}{Parameters}
{\em roshandle} & handle from R\-O\-S to open Timer, Subscriber and Publisher \\
\hline
{\em epos} & two instances of the Epos2\-Motor\-Controller-\/class. One for each side of the robot with the following order\-: left, right. \\
\hline
{\em wheel\-Perimeter} & \mbox{[}m\mbox{]} the perimeter of one wheel -\/ all motor-\/driven wheels should have the same perimeter and radius \\
\hline
{\em axis\-Length} & \mbox{[}m\mbox{]} the distance between two wheels with the same axis of rotation (on opposite sites of the robot) \\
\hline
{\em max\-M\-P\-S} & \mbox{[}m/s\mbox{]} highest allowed velocity of the robot \\
\hline
{\em odom\-Duration} & \mbox{[}s\mbox{]} the time between to calls of the \hyperlink{classTankSteering_ae19dbe86e3ae541c06525af2721a37dd}{odom\-Callback()} \\
\hline
{\em velocity\-Duration} & \mbox{[}s\mbox{]} the time between to calls of the \hyperlink{classTankSteering_ab1335cf95b773d0b8908d74ebb61c289}{set\-Velocity\-Callback()} \\
\hline
\end{DoxyParams}


Definition at line 12 of file Tank\-Steering.\-cpp.


\begin{DoxyCode}
\{
    \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a07b9b99e1d4d281a8ffc6cca8cebfcfa}{maxMPS} = maxMPS;
    \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a9bef02225da9845d32bf5700ef132aba}{odomDuration} = odomDuration;
    \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a30ffc7283de96cfdf97cd987de2cad63}{velocityDuration} = 
      velocityDuration;
    \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a546f41c6c1e7d0ba11e7a096c41d52cd}{axisLength} = axisLength;
    \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a6876c0ad344c0baf2f63fbe8da846af1}{wheelPerimeter} = wheelPerimeter;
    \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a895d3b886f7c964e6eb2eb97c3254be0}{factorMPSToRPM} = 60 / \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}
      .\hyperlink{structTankSteering_1_1tankSet_a6876c0ad344c0baf2f63fbe8da846af1}{wheelPerimeter};
    \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a0f3c7547f093cd0f8ca66016bca46cd2}{maxRPM} = \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a07b9b99e1d4d281a8ffc6cca8cebfcfa}{maxMPS}
       * \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a895d3b886f7c964e6eb2eb97c3254be0}{factorMPSToRPM};

    ROS\_ERROR(\textcolor{stringliteral}{"TAnkSteering: maxMPS: %.4lf, factorMPSToRPM: %.4lf, maxRPM:
       %.4lf"}, \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a07b9b99e1d4d281a8ffc6cca8cebfcfa}{maxMPS}, \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.
      \hyperlink{structTankSteering_1_1tankSet_a895d3b886f7c964e6eb2eb97c3254be0}{factorMPSToRPM}, \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a0f3c7547f093cd0f8ca66016bca46cd2}{maxRPM});

    \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a56100d71c75a60b1bee858cac36bd28b}{roshandle} = roshandle;
    \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=left; i<=right;i++) \{
        \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a0c1ff021afbf7602a5593ca973b25246}{epos}[i] = epos[i];
    \}

    \hyperlink{classTankSteering_ae08d9f507d6de01a86f59aa135283abc}{pos}.\hyperlink{structTankSteering_1_1odom_a20be7326384f778c008d55a0d304f0ab}{now}.\hyperlink{structTankSteering_1_1orientation_af121cb548f0f9fcfc8a294654b1ceb85}{x} = \hyperlink{classTankSteering_ae08d9f507d6de01a86f59aa135283abc}{pos}.\hyperlink{structTankSteering_1_1odom_a20be7326384f778c008d55a0d304f0ab}{now}.\hyperlink{structTankSteering_1_1orientation_a6fa34c399e16ffa4c8b8145126c6c9bf}{y} =   \hyperlink{classTankSteering_ae08d9f507d6de01a86f59aa135283abc}{pos}.\hyperlink{structTankSteering_1_1odom_a20be7326384f778c008d55a0d304f0ab}{now}.\hyperlink{structTankSteering_1_1orientation_a9e0356a869ea75261e37e089262cc5e8}{theta} = 0;
    \hyperlink{classTankSteering_ae08d9f507d6de01a86f59aa135283abc}{pos}.\hyperlink{structTankSteering_1_1odom_ae6353ef712a0b7bc9c783d77229d2221}{last}.\hyperlink{structTankSteering_1_1orientation_af121cb548f0f9fcfc8a294654b1ceb85}{x} = \hyperlink{classTankSteering_ae08d9f507d6de01a86f59aa135283abc}{pos}.\hyperlink{structTankSteering_1_1odom_ae6353ef712a0b7bc9c783d77229d2221}{last}.\hyperlink{structTankSteering_1_1orientation_a6fa34c399e16ffa4c8b8145126c6c9bf}{y} = \hyperlink{classTankSteering_ae08d9f507d6de01a86f59aa135283abc}{pos}.\hyperlink{structTankSteering_1_1odom_ae6353ef712a0b7bc9c783d77229d2221}{last}.\hyperlink{structTankSteering_1_1orientation_a9e0356a869ea75261e37e089262cc5e8}{theta} = 0;

    \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_ab604472ee21a35336e7be92ed0a9616f}{maxSafetyMPS} = \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}
      .\hyperlink{structTankSteering_1_1tankSet_a07b9b99e1d4d281a8ffc6cca8cebfcfa}{maxMPS};

    \hyperlink{classTankSteering_a32596c18de1130cad7e926e3182f12c4}{init}();
\}
\end{DoxyCode}
\hypertarget{classTankSteering_a598a4efa2896aa382ed7fe9af6e22519}{\index{Tank\-Steering@{Tank\-Steering}!$\sim$\-Tank\-Steering@{$\sim$\-Tank\-Steering}}
\index{$\sim$\-Tank\-Steering@{$\sim$\-Tank\-Steering}!TankSteering@{Tank\-Steering}}
\subsubsection[{$\sim$\-Tank\-Steering}]{\setlength{\rightskip}{0pt plus 5cm}Tank\-Steering\-::$\sim$\-Tank\-Steering (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classTankSteering_a598a4efa2896aa382ed7fe9af6e22519}


Destructor of the Tank\-Steering-\/class. 

Nothing to do by now. 

Definition at line 37 of file Tank\-Steering.\-cpp.


\begin{DoxyCode}
\{

\}
\end{DoxyCode}


\subsection{Member Function Documentation}
\hypertarget{classTankSteering_a7d071ca7df1b04000275255114d9ff63}{\index{Tank\-Steering@{Tank\-Steering}!drive\-Callback@{drive\-Callback}}
\index{drive\-Callback@{drive\-Callback}!TankSteering@{Tank\-Steering}}
\subsubsection[{drive\-Callback}]{\setlength{\rightskip}{0pt plus 5cm}void Tank\-Steering\-::drive\-Callback (
\begin{DoxyParamCaption}
\item[{const geometry\-\_\-msgs\-::\-Twist}]{velocity\-Vector}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}}\label{classTankSteering_a7d071ca7df1b04000275255114d9ff63}


velocity-\/\-Callback-\/function -\/ will be called if a twist message was sent 


\begin{DoxyParams}{Parameters}
{\em velocity\-Vector} & contains velocities in each direction of space and angular velocities around each axis \\
\hline
\end{DoxyParams}


Definition at line 48 of file Tank\-Steering.\-cpp.


\begin{DoxyCode}
\{
    \textcolor{keywordtype}{double} dxTarget = \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a546f41c6c1e7d0ba11e7a096c41d52cd}{axisLength} * 
      velocityVector.angular.z / 2;
    \textcolor{keywordtype}{double} xTarget = velocityVector.linear.x;

    \textcolor{comment}{//ROS\_ERROR("linear.x: %.6f ; angular.z: %.6f", velocityVector.linear.x,
       velocityVector.angular.z); //debugging}

    \textcolor{keywordflow}{if} ( fabs(\hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_ab604472ee21a35336e7be92ed0a9616f}{maxSafetyMPS}) > 0.01 ) \{
        \textcolor{comment}{//forward velocity restriction}
        \textcolor{keywordflow}{if} ( \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a07b9b99e1d4d281a8ffc6cca8cebfcfa}{maxMPS} < (fabs(dxTarget) + fabs(
      xTarget)) ) \{ xTarget = (\hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a07b9b99e1d4d281a8ffc6cca8cebfcfa}{maxMPS} - fabs(dxTarget)) * 
      \hyperlink{classTankSteering_a89990f8796af8d4224752c0e0a0daf47}{sign}(xTarget); \}

        \textcolor{keywordtype}{double} x = (xTarget > \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_ab604472ee21a35336e7be92ed0a9616f}{maxSafetyMPS}
      ) ? \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_ab604472ee21a35336e7be92ed0a9616f}{maxSafetyMPS} : xTarget;

        \textcolor{comment}{//rotation velocity restriction}
        \textcolor{keywordtype}{double} dx = (fabs(dxTarget) > \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_ab604472ee21a35336e7be92ed0a9616f}{maxSafetyMPS}
      ) ? \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_ab604472ee21a35336e7be92ed0a9616f}{maxSafetyMPS} * \hyperlink{classTankSteering_a89990f8796af8d4224752c0e0a0daf47}{sign}(dxTarget) : 
      dxTarget;

        \textcolor{comment}{//ROS\_ERROR("x: %.4f ; dx: %.4f", x, dx);   //debugging}

        \textcolor{comment}{//output velocities}
        \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a21505f9f26ad6444c89d0795d35a5127}{targetVelocityMPS}[left]  = x 
      - dx;
        \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a21505f9f26ad6444c89d0795d35a5127}{targetVelocityMPS}[right] = x 
      + dx;
    \} \textcolor{keywordflow}{else} \{
        ROS\_ERROR(\textcolor{stringliteral}{"No movement possible because the maximum safety Velocity is
       to low."});
        \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a21505f9f26ad6444c89d0795d35a5127}{targetVelocityMPS}[left]  = 0;
        \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a21505f9f26ad6444c89d0795d35a5127}{targetVelocityMPS}[right]  = 0
      ;
    \}
\}
\end{DoxyCode}
\hypertarget{classTankSteering_a1ee9bb43163695018d65f8dbda46c050}{\index{Tank\-Steering@{Tank\-Steering}!drive\-Callback\-M\-P\-S@{drive\-Callback\-M\-P\-S}}
\index{drive\-Callback\-M\-P\-S@{drive\-Callback\-M\-P\-S}!TankSteering@{Tank\-Steering}}
\subsubsection[{drive\-Callback\-M\-P\-S}]{\setlength{\rightskip}{0pt plus 5cm}void Tank\-Steering\-::drive\-Callback\-M\-P\-S (
\begin{DoxyParamCaption}
\item[{const epos2\-\_\-control\-::velocity}]{speed}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}}\label{classTankSteering_a1ee9bb43163695018d65f8dbda46c050}


velocity-\/\-Callback-\/function -\/ will be called if a speed-\/message (velocity left and right) was sent 


\begin{DoxyParams}{Parameters}
{\em speed} & contains a velocity for each side of the robot \\
\hline
\end{DoxyParams}


Definition at line 42 of file Tank\-Steering.\-cpp.


\begin{DoxyCode}
\{
    \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a21505f9f26ad6444c89d0795d35a5127}{targetVelocityMPS}[left] = speed.
      left;
    \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a21505f9f26ad6444c89d0795d35a5127}{targetVelocityMPS}[right] = speed.
      right;
\}
\end{DoxyCode}
\hypertarget{classTankSteering_aed4cd5e319cd5c9cd95b835f1615eb0d}{\index{Tank\-Steering@{Tank\-Steering}!get\-Device\-Error\-Callback@{get\-Device\-Error\-Callback}}
\index{get\-Device\-Error\-Callback@{get\-Device\-Error\-Callback}!TankSteering@{Tank\-Steering}}
\subsubsection[{get\-Device\-Error\-Callback}]{\setlength{\rightskip}{0pt plus 5cm}void Tank\-Steering\-::get\-Device\-Error\-Callback (
\begin{DoxyParamCaption}
\item[{const ros\-::\-Timer\-Event \&}]{event}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}}\label{classTankSteering_aed4cd5e319cd5c9cd95b835f1615eb0d}


error-\/callback -\/ will be called continuously and check both E\-P\-O\-S2 on Errors. 

if an error is detected both E\-P\-O\-S2 will be disable and afterwards reseted


\begin{DoxyParams}{Parameters}
{\em event} & contains some time values according to the event \\
\hline
\end{DoxyParams}


Definition at line 194 of file Tank\-Steering.\-cpp.


\begin{DoxyCode}
\{
    \textcolor{keywordtype}{int} error[2];

    \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = left; i <= right; i++) \{ error[i] = \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.
      \hyperlink{structTankSteering_1_1tankSet_a0c1ff021afbf7602a5593ca973b25246}{epos}[i]->\hyperlink{classEpos2MotorController_a481615a590e6d1c6bf6c39c426e6d9a6}{testForErrorsAndPrint}(); \}

    \textcolor{keywordflow}{if} (error[left] == 0 || error[right] == 0) \{
        \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = left; i <= right; i++) \{ \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a0c1ff021afbf7602a5593ca973b25246}{epos}
      [i]->\hyperlink{classEpos2MotorController_ad58ad9fe38c72ce0d457a286973f8a99}{disableEpos2}();\}
        \hyperlink{classTankSteering_a99aadf750c50610cfea8732f95e21426}{resetEPOS2Fault}();
    \}
\}
\end{DoxyCode}
\hypertarget{classTankSteering_a32596c18de1130cad7e926e3182f12c4}{\index{Tank\-Steering@{Tank\-Steering}!init@{init}}
\index{init@{init}!TankSteering@{Tank\-Steering}}
\subsubsection[{init}]{\setlength{\rightskip}{0pt plus 5cm}int Tank\-Steering\-::init (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}}\label{classTankSteering_a32596c18de1130cad7e926e3182f12c4}


Initialized both E\-P\-O\-S2 and setup all R\-O\-S components. 

\begin{DoxyReturn}{Returns}
1 if successful otherwise 0 
\end{DoxyReturn}


Definition at line 206 of file Tank\-Steering.\-cpp.


\begin{DoxyCode}
\{
    \textcolor{keywordtype}{int} j = 0;
    \textcolor{keywordtype}{int} active[2] = \{0,0\};
    \hyperlink{classEpos2MotorController_ab5ec630dfbb90ad674e311187926060c}{Epos2MotorController::EposState} state = 
      \hyperlink{classEpos2MotorController_ab5ec630dfbb90ad674e311187926060caf0eea74682d3d3f21bec6e5b376cf443}{Epos2MotorController::disabled};

    \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = left; i <= right; i++) \{ \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a0c1ff021afbf7602a5593ca973b25246}{epos}[i]
      ->\hyperlink{classEpos2MotorController_a481615a590e6d1c6bf6c39c426e6d9a6}{testForErrorsAndPrint}(); \}
    \hyperlink{classTankSteering_a99aadf750c50610cfea8732f95e21426}{resetEPOS2Fault}();
    \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=left; i<=right;i++) \{\hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a0c1ff021afbf7602a5593ca973b25246}{epos}[i]->\hyperlink{classEpos2MotorController_a0c2778ab028417b907d7a55297ccbd4a}{init}
      (\hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a0f3c7547f093cd0f8ca66016bca46cd2}{maxRPM}, \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a6876c0ad344c0baf2f63fbe8da846af1}{wheelPerimeter}
      );\}
    ROS\_INFO(\textcolor{stringliteral}{"initialize both EPOS2 successfully"});

    j = 0;
    \textcolor{keywordflow}{do} \{
        \textcolor{keywordflow}{if} (\hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a0c1ff021afbf7602a5593ca973b25246}{epos}[left]->\hyperlink{classEpos2MotorController_ac6c31e0dc57485aa817431b22627fc70}{getEpos2State}
      () == \hyperlink{classEpos2MotorController_ab5ec630dfbb90ad674e311187926060cae6493e2426163b114bea951ab9a419d5}{Epos2MotorController::enabled} && \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}
      .\hyperlink{structTankSteering_1_1tankSet_a0c1ff021afbf7602a5593ca973b25246}{epos}[right]->\hyperlink{classEpos2MotorController_ac6c31e0dc57485aa817431b22627fc70}{getEpos2State}() == \hyperlink{classEpos2MotorController_ab5ec630dfbb90ad674e311187926060cae6493e2426163b114bea951ab9a419d5}{Epos2MotorController::enabled}
      ) \{
            state = \hyperlink{classEpos2MotorController_ab5ec630dfbb90ad674e311187926060cae6493e2426163b114bea951ab9a419d5}{Epos2MotorController::enabled};
            \textcolor{keywordflow}{if} (j == 0) \{ \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=left; i<=right;i++) \{\hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}
      .\hyperlink{structTankSteering_1_1tankSet_a0c1ff021afbf7602a5593ca973b25246}{epos}[i]->\hyperlink{classEpos2MotorController_aeadc7a21fa6619a4104887f169b9d2fd}{enableEpos2}();\} \}
        \}
        j++;
    \} \textcolor{keywordflow}{while} ( state != \hyperlink{classEpos2MotorController_ab5ec630dfbb90ad674e311187926060cae6493e2426163b114bea951ab9a419d5}{Epos2MotorController::enabled}
       && j < 6);

    \textcolor{keywordflow}{if} (state == \hyperlink{classEpos2MotorController_ab5ec630dfbb90ad674e311187926060cae6493e2426163b114bea951ab9a419d5}{Epos2MotorController::enabled}) \{

        \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=left; i<=right; i++) \{
            active[i] = \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a0c1ff021afbf7602a5593ca973b25246}{epos}[i]->
      \hyperlink{classEpos2MotorController_a4f3a4529154e01acb6a15ff94d5c9000}{activateProfileVelocity}();
        \}

        \textcolor{keywordflow}{if} ( active[left] == 1 && active[right] == 1 ) \{

            \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a060a7d28692189eb3fae35364a36af4c}{epos2MPS} = \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}
      .\hyperlink{structTankSteering_1_1tankSet_a56100d71c75a60b1bee858cac36bd28b}{roshandle}.subscribe(\textcolor{stringliteral}{"epos2\_MPS\_left\_right"}, 1000, &
      \hyperlink{classTankSteering_a1ee9bb43163695018d65f8dbda46c050}{TankSteering::driveCallbackMPS}, \textcolor{keyword}{this});
            \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a98ce962e2398504d19e9ec5d337b520f}{epos2Twist} = \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}
      .\hyperlink{structTankSteering_1_1tankSet_a56100d71c75a60b1bee858cac36bd28b}{roshandle}.subscribe(\textcolor{stringliteral}{"cmd\_vel"}, 1000, &\hyperlink{classTankSteering_a7d071ca7df1b04000275255114d9ff63}{TankSteering::driveCallback}
      , \textcolor{keyword}{this});

            \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=left; i<=right; i++) \{ \hyperlink{classTankSteering_ae08d9f507d6de01a86f59aa135283abc}{pos}.\hyperlink{structTankSteering_1_1odom_a25a805ceeca36f85c91baaec605616d5}{lastPosition}[i
      ]=\hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a0c1ff021afbf7602a5593ca973b25246}{epos}[i]->\hyperlink{classEpos2MotorController_a07b5def07609a91cba8a1977f6436c0a}{getAbsolutePosition}()
       * \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a6876c0ad344c0baf2f63fbe8da846af1}{wheelPerimeter}; \}

            \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_aa0c689559cc4b8217b66d752ed9c5514}{odomTimer} = \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}
      .\hyperlink{structTankSteering_1_1tankSet_a56100d71c75a60b1bee858cac36bd28b}{roshandle}.createTimer(ros::Duration(\hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.
      \hyperlink{structTankSteering_1_1tankSet_a9bef02225da9845d32bf5700ef132aba}{odomDuration}), &\hyperlink{classTankSteering_ae19dbe86e3ae541c06525af2721a37dd}{TankSteering::odomCallback}
      , \textcolor{keyword}{this});
            \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_acbbb0676b14d02706ad100abee4a22c8}{setVelocity} = \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}
      .\hyperlink{structTankSteering_1_1tankSet_a56100d71c75a60b1bee858cac36bd28b}{roshandle}.createTimer(ros::Duration(\hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.
      \hyperlink{structTankSteering_1_1tankSet_a30ffc7283de96cfdf97cd987de2cad63}{velocityDuration}), &\hyperlink{classTankSteering_ab1335cf95b773d0b8908d74ebb61c289}{TankSteering::setVelocityCallback}
      , \textcolor{keyword}{this});
            \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a49304224faeac566fc964cbc98135499}{odomPub} = \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.
      \hyperlink{structTankSteering_1_1tankSet_a56100d71c75a60b1bee858cac36bd28b}{roshandle}.advertise<nav\_msgs::Odometry>(\textcolor{stringliteral}{"odom"}, 50);

            \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a729f2d8c93ceca1feee6dd6c7680e85a}{getErrorLoop} = \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}
      .\hyperlink{structTankSteering_1_1tankSet_a56100d71c75a60b1bee858cac36bd28b}{roshandle}.createTimer(ros::Duration(1.02), &
      \hyperlink{classTankSteering_aed4cd5e319cd5c9cd95b835f1615eb0d}{TankSteering::getDeviceErrorCallback}, \textcolor{keyword}{this})
      ;

            ROS\_INFO(\textcolor{stringliteral}{"Epos2-TankSteering is now listing for velocity messages"})
      ;
            \textcolor{keywordflow}{return} 1;

        \} \textcolor{keywordflow}{else} \{
            ROS\_ERROR(\textcolor{stringliteral}{"at least one Epos2 is not in ProfileVelocityMode - no
       movement is possible"});
            \textcolor{keywordflow}{return} 0;
        \}

    \} \textcolor{keywordflow}{else} \{
        ROS\_FATAL(\textcolor{stringliteral}{"Unable starting motors, the EPOS2 are not enabled. (Maybe
       Power-off or Unplugged?)"});

        \textcolor{keywordflow}{return} 0;
    \}\textcolor{comment}{//end of state is enable}
\}
\end{DoxyCode}
\hypertarget{classTankSteering_ac07cb26cfc52f615863d6fdaef924131}{\index{Tank\-Steering@{Tank\-Steering}!init\-Laserscanner@{init\-Laserscanner}}
\index{init\-Laserscanner@{init\-Laserscanner}!TankSteering@{Tank\-Steering}}
\subsubsection[{init\-Laserscanner}]{\setlength{\rightskip}{0pt plus 5cm}void Tank\-Steering\-::init\-Laserscanner (
\begin{DoxyParamCaption}
\item[{int}]{range = {\ttfamily 180}, }
\item[{double}]{low = {\ttfamily 0.15}, }
\item[{double}]{high = {\ttfamily 0.6}}
\end{DoxyParamCaption}
)}}\label{classTankSteering_ac07cb26cfc52f615863d6fdaef924131}


Initialized the parameters for using the laser-\/scanner to avoid crashing into obstacles in front of the robot. 


\begin{DoxyParams}{Parameters}
{\em range} & \mbox{[}degree\mbox{]} the angle on which laser-\/scanner-\/data will be checked on obstacles \\
\hline
{\em low} & \mbox{[}m\mbox{]} the distance with velocity 0 m/s \\
\hline
{\em high} & \mbox{[}m\mbox{]} the distance where the restriction of velocity starts \\
\hline
\end{DoxyParams}


Definition at line 260 of file Tank\-Steering.\-cpp.


\begin{DoxyCode}
\{
    \textcolor{comment}{//sicklmsCounter=0; //testing laser-scanner}
    \textcolor{keywordtype}{int} n=3;

    \hyperlink{classTankSteering_a63ff23d449dca437f90e16f3a3684c20}{LaserDistance}.\hyperlink{structTankSteering_1_1distanceStruct_a457ba78027c23e665b5d16909872cc81}{low} = low;
    \hyperlink{classTankSteering_a63ff23d449dca437f90e16f3a3684c20}{LaserDistance}.\hyperlink{structTankSteering_1_1distanceStruct_a4c297988074a426bbfd0e489e450a9e4}{high} = high;
    \hyperlink{classTankSteering_a63ff23d449dca437f90e16f3a3684c20}{LaserDistance}.\hyperlink{structTankSteering_1_1distanceStruct_a3c3fec327c3233ffc23ad60179f8cec9}{range} = range;

    \hyperlink{classTankSteering_a63ff23d449dca437f90e16f3a3684c20}{LaserDistance}.\hyperlink{structTankSteering_1_1distanceStruct_a3d27444d897b76c5fd31b3562938ec50}{a} = 2 * \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a07b9b99e1d4d281a8ffc6cca8cebfcfa}{maxMPS} *
       (n - 2) / ( n * pow((\hyperlink{classTankSteering_a63ff23d449dca437f90e16f3a3684c20}{LaserDistance}.\hyperlink{structTankSteering_1_1distanceStruct_a457ba78027c23e665b5d16909872cc81}{low} - \hyperlink{classTankSteering_a63ff23d449dca437f90e16f3a3684c20}{LaserDistance}
      .\hyperlink{structTankSteering_1_1distanceStruct_a4c297988074a426bbfd0e489e450a9e4}{high}),2) );
    \hyperlink{classTankSteering_a63ff23d449dca437f90e16f3a3684c20}{LaserDistance}.\hyperlink{structTankSteering_1_1distanceStruct_a5fab2689bfcfa0c34b03c9e5adfc540f}{b} = \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a07b9b99e1d4d281a8ffc6cca8cebfcfa}{maxMPS} / (
      \hyperlink{classTankSteering_a63ff23d449dca437f90e16f3a3684c20}{LaserDistance}.\hyperlink{structTankSteering_1_1distanceStruct_a4c297988074a426bbfd0e489e450a9e4}{high} - \hyperlink{classTankSteering_a63ff23d449dca437f90e16f3a3684c20}{LaserDistance}.\hyperlink{structTankSteering_1_1distanceStruct_a457ba78027c23e665b5d16909872cc81}{low}) - 
      \hyperlink{classTankSteering_a63ff23d449dca437f90e16f3a3684c20}{LaserDistance}.\hyperlink{structTankSteering_1_1distanceStruct_a3d27444d897b76c5fd31b3562938ec50}{a} * (\hyperlink{classTankSteering_a63ff23d449dca437f90e16f3a3684c20}{LaserDistance}.\hyperlink{structTankSteering_1_1distanceStruct_a457ba78027c23e665b5d16909872cc81}{low} + 
      \hyperlink{classTankSteering_a63ff23d449dca437f90e16f3a3684c20}{LaserDistance}.\hyperlink{structTankSteering_1_1distanceStruct_a4c297988074a426bbfd0e489e450a9e4}{high});
    \hyperlink{classTankSteering_a63ff23d449dca437f90e16f3a3684c20}{LaserDistance}.\hyperlink{structTankSteering_1_1distanceStruct_a057147d8925b80f772f8e299067248a8}{c} = -1 * (\hyperlink{classTankSteering_a63ff23d449dca437f90e16f3a3684c20}{LaserDistance}.\hyperlink{structTankSteering_1_1distanceStruct_a3d27444d897b76c5fd31b3562938ec50}{a} * pow(
      \hyperlink{classTankSteering_a63ff23d449dca437f90e16f3a3684c20}{LaserDistance}.\hyperlink{structTankSteering_1_1distanceStruct_a457ba78027c23e665b5d16909872cc81}{low},2) + \hyperlink{classTankSteering_a63ff23d449dca437f90e16f3a3684c20}{LaserDistance}.\hyperlink{structTankSteering_1_1distanceStruct_a5fab2689bfcfa0c34b03c9e5adfc540f}{b} * 
      \hyperlink{classTankSteering_a63ff23d449dca437f90e16f3a3684c20}{LaserDistance}.\hyperlink{structTankSteering_1_1distanceStruct_a457ba78027c23e665b5d16909872cc81}{low});

    \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a6c3c336a6adc81a2ec23389d5a6f69c4}{sickLMS} = \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a56100d71c75a60b1bee858cac36bd28b}{
      roshandle}.subscribe(\textcolor{stringliteral}{"scan"}, 100, &\hyperlink{classTankSteering_a724c44b283936129841b91ecdcdb6235}{TankSteering::LaserScanCallback}
      , \textcolor{keyword}{this});

    ROS\_ERROR(\textcolor{stringliteral}{"Laser-Scanner successfully initialized (Parameter-> a: %.4lf, b:
       %.4lf, c: %.4lf)"}, \hyperlink{classTankSteering_a63ff23d449dca437f90e16f3a3684c20}{LaserDistance}.\hyperlink{structTankSteering_1_1distanceStruct_a3d27444d897b76c5fd31b3562938ec50}{a}, \hyperlink{classTankSteering_a63ff23d449dca437f90e16f3a3684c20}{LaserDistance}.\hyperlink{structTankSteering_1_1distanceStruct_a5fab2689bfcfa0c34b03c9e5adfc540f}{b}
      , \hyperlink{classTankSteering_a63ff23d449dca437f90e16f3a3684c20}{LaserDistance}.\hyperlink{structTankSteering_1_1distanceStruct_a057147d8925b80f772f8e299067248a8}{c});
\}
\end{DoxyCode}
\hypertarget{classTankSteering_a724c44b283936129841b91ecdcdb6235}{\index{Tank\-Steering@{Tank\-Steering}!Laser\-Scan\-Callback@{Laser\-Scan\-Callback}}
\index{Laser\-Scan\-Callback@{Laser\-Scan\-Callback}!TankSteering@{Tank\-Steering}}
\subsubsection[{Laser\-Scan\-Callback}]{\setlength{\rightskip}{0pt plus 5cm}void Tank\-Steering\-::\-Laser\-Scan\-Callback (
\begin{DoxyParamCaption}
\item[{const sensor\-\_\-msgs\-::\-Laser\-Scan}]{sensor\-Data}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}}\label{classTankSteering_a724c44b283936129841b91ecdcdb6235}


laser-\/scanner-\/callback -\/ will be called if the laser-\/scanner-\/node send new point-\/cloud-\/data 


\begin{DoxyParams}{Parameters}
{\em sensor\-Data} & contains all points measured by the laser-\/scanner and the distance \\
\hline
\end{DoxyParams}


Definition at line 163 of file Tank\-Steering.\-cpp.


\begin{DoxyCode}
\{
    \textcolor{keywordtype}{double} minValue = sensorData.range\_max;
    \textcolor{keywordtype}{int} points = 0, start = 0;

    points = ( abs(sensorData.ranges.size()) > 180 ) ? 180 : abs(sensorData.
      ranges.size());

    \textcolor{keywordflow}{if} (points > \hyperlink{classTankSteering_a63ff23d449dca437f90e16f3a3684c20}{LaserDistance}.\hyperlink{structTankSteering_1_1distanceStruct_a3c3fec327c3233ffc23ad60179f8cec9}{range}) \{
        start = (int)((points - \hyperlink{classTankSteering_a63ff23d449dca437f90e16f3a3684c20}{LaserDistance}.\hyperlink{structTankSteering_1_1distanceStruct_a3c3fec327c3233ffc23ad60179f8cec9}{range}) / 2);    \textcolor{comment}{
      //quick & dirty ... only produce even ranges - if LaserDistance.range is uneven
       it behaves the same as the next lower even integer}
    \}

    \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=start; i<points-start; i++) \{
        \textcolor{keywordflow}{if} (sensorData.ranges[i] < minValue) \{minValue = sensorData.ranges[i];\}
    \}

    \textcolor{keywordflow}{if} (minValue < \hyperlink{classTankSteering_a63ff23d449dca437f90e16f3a3684c20}{LaserDistance}.\hyperlink{structTankSteering_1_1distanceStruct_a4c297988074a426bbfd0e489e450a9e4}{high}) \{
        \textcolor{keywordflow}{if} (minValue > \hyperlink{classTankSteering_a63ff23d449dca437f90e16f3a3684c20}{LaserDistance}.\hyperlink{structTankSteering_1_1distanceStruct_a457ba78027c23e665b5d16909872cc81}{low}) \{
            \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_ab604472ee21a35336e7be92ed0a9616f}{maxSafetyMPS} = \hyperlink{classTankSteering_a63ff23d449dca437f90e16f3a3684c20}{LaserDistance}
      .\hyperlink{structTankSteering_1_1distanceStruct_a3d27444d897b76c5fd31b3562938ec50}{a} * pow(minValue,2) + \hyperlink{classTankSteering_a63ff23d449dca437f90e16f3a3684c20}{LaserDistance}.\hyperlink{structTankSteering_1_1distanceStruct_a5fab2689bfcfa0c34b03c9e5adfc540f}{b} * minValue + \hyperlink{classTankSteering_a63ff23d449dca437f90e16f3a3684c20}{LaserDistance}
      .\hyperlink{structTankSteering_1_1distanceStruct_a057147d8925b80f772f8e299067248a8}{c};
        \} \textcolor{keywordflow}{else} \{
            \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_ab604472ee21a35336e7be92ed0a9616f}{maxSafetyMPS} = 0;
        \}
    \}\textcolor{keywordflow}{else}\{
        \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_ab604472ee21a35336e7be92ed0a9616f}{maxSafetyMPS} = \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}
      .\hyperlink{structTankSteering_1_1tankSet_a07b9b99e1d4d281a8ffc6cca8cebfcfa}{maxMPS};
    \}

    \textcolor{comment}{/*if (sicklmsCounter >= 20) \{}
\textcolor{comment}{        sicklmsCounter=0;}
\textcolor{comment}{        ROS\_ERROR("seq: %i, Nearest: %.4lf, maxVel: %.4lf, VelTrans: %.4lf,
       VelRot: %.4lf", sensorData.header.seq, minValue, maxSafetyForwardVelocity,
       cmdVelTimerSet.x, cmdVelTimerSet.dx);}
\textcolor{comment}{    \}*/}
\}
\end{DoxyCode}
\hypertarget{classTankSteering_ae19dbe86e3ae541c06525af2721a37dd}{\index{Tank\-Steering@{Tank\-Steering}!odom\-Callback@{odom\-Callback}}
\index{odom\-Callback@{odom\-Callback}!TankSteering@{Tank\-Steering}}
\subsubsection[{odom\-Callback}]{\setlength{\rightskip}{0pt plus 5cm}void Tank\-Steering\-::odom\-Callback (
\begin{DoxyParamCaption}
\item[{const ros\-::\-Timer\-Event \&}]{event}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}}\label{classTankSteering_ae19dbe86e3ae541c06525af2721a37dd}


odom-\/callback-\/function -\/ reads out the current position of both motors connected to the E\-P\-O\-S2s and calculate the odometry-\/data 


\begin{DoxyParams}{Parameters}
{\em event} & contains some time values according to the event \\
\hline
\end{DoxyParams}


Definition at line 88 of file Tank\-Steering.\-cpp.


\begin{DoxyCode}
\{
    \textcolor{keywordtype}{double} pos\_linear\_z=0;
    \textcolor{keywordtype}{double} pos\_delta[2], temp\_pos[2];
    tf::StampedTransform readTransform;
    geometry\_msgs::TransformStamped transform;
    nav\_msgs::Odometry nav\_odom;

    \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=left; i<=right; i++) \{ temp\_pos[i] = \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.
      \hyperlink{structTankSteering_1_1tankSet_a0c1ff021afbf7602a5593ca973b25246}{epos}[i]->\hyperlink{classEpos2MotorController_a07b5def07609a91cba8a1977f6436c0a}{getAbsolutePosition}() * \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}
      .\hyperlink{structTankSteering_1_1tankSet_a6876c0ad344c0baf2f63fbe8da846af1}{wheelPerimeter}; \}
    \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=left; i<=right; i++) \{
        pos\_delta[i] = temp\_pos[i] - \hyperlink{classTankSteering_ae08d9f507d6de01a86f59aa135283abc}{pos}.\hyperlink{structTankSteering_1_1odom_a25a805ceeca36f85c91baaec605616d5}{lastPosition}[i];
        \hyperlink{classTankSteering_ae08d9f507d6de01a86f59aa135283abc}{pos}.\hyperlink{structTankSteering_1_1odom_a25a805ceeca36f85c91baaec605616d5}{lastPosition}[i] = temp\_pos[i];
    \}

    \textcolor{keywordtype}{float} timeDelta = (\textcolor{keyword}{event}.current\_real - \textcolor{keyword}{event}.last\_real).toSec();
    \textcolor{keywordtype}{double} polar\_s  =(pos\_delta[right] + pos\_delta[left] ) * 0.5;
    \textcolor{keywordtype}{double} polar\_theta=(pos\_delta[right] - pos\_delta[left]) / \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}
      .\hyperlink{structTankSteering_1_1tankSet_a546f41c6c1e7d0ba11e7a096c41d52cd}{axisLength};
    \textcolor{keywordtype}{double} delta\_r = (polar\_theta == 0) ? polar\_s : (polar\_s / polar\_theta) * 
      sin(polar\_theta/2) * 2;

    \textcolor{keywordflow}{try} \{
        \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a2df52ee5bd9169dad2bd8c70d054cf74}{tfListener}.lookupTransform(\textcolor{stringliteral}{"/odom"}, \textcolor{stringliteral}{
      "/base\_link"}, ros::Time(0), readTransform);
        \hyperlink{classTankSteering_ae08d9f507d6de01a86f59aa135283abc}{pos}.\hyperlink{structTankSteering_1_1odom_ae6353ef712a0b7bc9c783d77229d2221}{last}.\hyperlink{structTankSteering_1_1orientation_af121cb548f0f9fcfc8a294654b1ceb85}{x} = readTransform.getOrigin().x();
        \hyperlink{classTankSteering_ae08d9f507d6de01a86f59aa135283abc}{pos}.\hyperlink{structTankSteering_1_1odom_ae6353ef712a0b7bc9c783d77229d2221}{last}.\hyperlink{structTankSteering_1_1orientation_a6fa34c399e16ffa4c8b8145126c6c9bf}{y} = readTransform.getOrigin().y();
        \hyperlink{classTankSteering_ae08d9f507d6de01a86f59aa135283abc}{pos}.\hyperlink{structTankSteering_1_1odom_ae6353ef712a0b7bc9c783d77229d2221}{last}.\hyperlink{structTankSteering_1_1orientation_a9e0356a869ea75261e37e089262cc5e8}{theta} = tf::getYaw(readTransform.getRotation());
    \} \textcolor{keywordflow}{catch} (tf::TransformException ex) \{
        ROS\_ERROR(\textcolor{stringliteral}{"%s"},ex.what());
    \}

    \hyperlink{classTankSteering_ae08d9f507d6de01a86f59aa135283abc}{pos}.\hyperlink{structTankSteering_1_1odom_a20be7326384f778c008d55a0d304f0ab}{now}.\hyperlink{structTankSteering_1_1orientation_af121cb548f0f9fcfc8a294654b1ceb85}{x} = \hyperlink{classTankSteering_ae08d9f507d6de01a86f59aa135283abc}{pos}.\hyperlink{structTankSteering_1_1odom_ae6353ef712a0b7bc9c783d77229d2221}{last}.\hyperlink{structTankSteering_1_1orientation_af121cb548f0f9fcfc8a294654b1ceb85}{x} + delta\_r * cos(polar\_theta/2 + \hyperlink{classTankSteering_ae08d9f507d6de01a86f59aa135283abc}{pos}
      .\hyperlink{structTankSteering_1_1odom_ae6353ef712a0b7bc9c783d77229d2221}{last}.\hyperlink{structTankSteering_1_1orientation_a9e0356a869ea75261e37e089262cc5e8}{theta});
    \hyperlink{classTankSteering_ae08d9f507d6de01a86f59aa135283abc}{pos}.\hyperlink{structTankSteering_1_1odom_a20be7326384f778c008d55a0d304f0ab}{now}.\hyperlink{structTankSteering_1_1orientation_a6fa34c399e16ffa4c8b8145126c6c9bf}{y} = \hyperlink{classTankSteering_ae08d9f507d6de01a86f59aa135283abc}{pos}.\hyperlink{structTankSteering_1_1odom_ae6353ef712a0b7bc9c783d77229d2221}{last}.\hyperlink{structTankSteering_1_1orientation_a6fa34c399e16ffa4c8b8145126c6c9bf}{y} + delta\_r * sin(polar\_theta/2 + \hyperlink{classTankSteering_ae08d9f507d6de01a86f59aa135283abc}{pos}
      .\hyperlink{structTankSteering_1_1odom_ae6353ef712a0b7bc9c783d77229d2221}{last}.\hyperlink{structTankSteering_1_1orientation_a9e0356a869ea75261e37e089262cc5e8}{theta});
    \hyperlink{classTankSteering_ae08d9f507d6de01a86f59aa135283abc}{pos}.\hyperlink{structTankSteering_1_1odom_a20be7326384f778c008d55a0d304f0ab}{now}.\hyperlink{structTankSteering_1_1orientation_a9e0356a869ea75261e37e089262cc5e8}{theta} = \hyperlink{classTankSteering_ae08d9f507d6de01a86f59aa135283abc}{pos}.\hyperlink{structTankSteering_1_1odom_ae6353ef712a0b7bc9c783d77229d2221}{last}.\hyperlink{structTankSteering_1_1orientation_a9e0356a869ea75261e37e089262cc5e8}{theta} + polar\_theta;

    \textcolor{comment}{//odom}
    geometry\_msgs::Quaternion odom\_quat = tf::createQuaternionMsgFromYaw(\hyperlink{classTankSteering_ae08d9f507d6de01a86f59aa135283abc}{pos}
      .\hyperlink{structTankSteering_1_1odom_a20be7326384f778c008d55a0d304f0ab}{now}.\hyperlink{structTankSteering_1_1orientation_a9e0356a869ea75261e37e089262cc5e8}{theta});

    transform.header.stamp = \textcolor{keyword}{event}.current\_real;
    transform.header.frame\_id = \textcolor{stringliteral}{"odom"};
    transform.child\_frame\_id = \textcolor{stringliteral}{"base\_link"};

    transform.transform.translation.x = \hyperlink{classTankSteering_ae08d9f507d6de01a86f59aa135283abc}{pos}.\hyperlink{structTankSteering_1_1odom_a20be7326384f778c008d55a0d304f0ab}{now}.\hyperlink{structTankSteering_1_1orientation_af121cb548f0f9fcfc8a294654b1ceb85}{x};
    transform.transform.translation.y = \hyperlink{classTankSteering_ae08d9f507d6de01a86f59aa135283abc}{pos}.\hyperlink{structTankSteering_1_1odom_a20be7326384f778c008d55a0d304f0ab}{now}.\hyperlink{structTankSteering_1_1orientation_a6fa34c399e16ffa4c8b8145126c6c9bf}{y};
    transform.transform.translation.z = pos\_linear\_z;
    transform.transform.rotation = odom\_quat;

    \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a24fcf593e4c92d8abfd5444e1206807b}{tfBroad}.sendTransform(transform);

    nav\_odom.header.stamp = \textcolor{keyword}{event}.current\_real;
    nav\_odom.header.frame\_id = \textcolor{stringliteral}{"odom"};
    nav\_odom.pose.pose.position.x = \hyperlink{classTankSteering_ae08d9f507d6de01a86f59aa135283abc}{pos}.\hyperlink{structTankSteering_1_1odom_a20be7326384f778c008d55a0d304f0ab}{now}.\hyperlink{structTankSteering_1_1orientation_af121cb548f0f9fcfc8a294654b1ceb85}{x};
    nav\_odom.pose.pose.position.y = \hyperlink{classTankSteering_ae08d9f507d6de01a86f59aa135283abc}{pos}.\hyperlink{structTankSteering_1_1odom_a20be7326384f778c008d55a0d304f0ab}{now}.\hyperlink{structTankSteering_1_1orientation_a6fa34c399e16ffa4c8b8145126c6c9bf}{y};
    nav\_odom.pose.pose.position.z = pos\_linear\_z;
    nav\_odom.pose.pose.orientation = odom\_quat;
    nav\_odom.twist.twist.linear.x = polar\_s / timeDelta;
    nav\_odom.twist.twist.linear.y = 0;
    nav\_odom.twist.twist.linear.z = 0;
    nav\_odom.twist.twist.angular.x = 0;
    nav\_odom.twist.twist.angular.y = 0;
    nav\_odom.twist.twist.angular.z = polar\_theta / timeDelta;
    \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a49304224faeac566fc964cbc98135499}{odomPub}.publish(nav\_odom);

    \hyperlink{classTankSteering_ae08d9f507d6de01a86f59aa135283abc}{pos}.\hyperlink{structTankSteering_1_1odom_ae6353ef712a0b7bc9c783d77229d2221}{last}.\hyperlink{structTankSteering_1_1orientation_af121cb548f0f9fcfc8a294654b1ceb85}{x} = \hyperlink{classTankSteering_ae08d9f507d6de01a86f59aa135283abc}{pos}.\hyperlink{structTankSteering_1_1odom_a20be7326384f778c008d55a0d304f0ab}{now}.\hyperlink{structTankSteering_1_1orientation_af121cb548f0f9fcfc8a294654b1ceb85}{x};
    \hyperlink{classTankSteering_ae08d9f507d6de01a86f59aa135283abc}{pos}.\hyperlink{structTankSteering_1_1odom_ae6353ef712a0b7bc9c783d77229d2221}{last}.\hyperlink{structTankSteering_1_1orientation_a6fa34c399e16ffa4c8b8145126c6c9bf}{y} = \hyperlink{classTankSteering_ae08d9f507d6de01a86f59aa135283abc}{pos}.\hyperlink{structTankSteering_1_1odom_a20be7326384f778c008d55a0d304f0ab}{now}.\hyperlink{structTankSteering_1_1orientation_a6fa34c399e16ffa4c8b8145126c6c9bf}{y};
    \hyperlink{classTankSteering_ae08d9f507d6de01a86f59aa135283abc}{pos}.\hyperlink{structTankSteering_1_1odom_ae6353ef712a0b7bc9c783d77229d2221}{last}.\hyperlink{structTankSteering_1_1orientation_a9e0356a869ea75261e37e089262cc5e8}{theta} = \hyperlink{classTankSteering_ae08d9f507d6de01a86f59aa135283abc}{pos}.\hyperlink{structTankSteering_1_1odom_a20be7326384f778c008d55a0d304f0ab}{now}.\hyperlink{structTankSteering_1_1orientation_a9e0356a869ea75261e37e089262cc5e8}{theta};

    \textcolor{comment}{//ROS\_ERROR("last pos (x, y, phi): %.4lf, %.4lf, %.4lf", pos.last.x,
       pos.last.y, pos.last.theta);}
    \textcolor{comment}{//ROS\_ERROR("new pos (x, y, phi): %.4lf, %.4lf, %.4lf", pos.now.x,
       pos.now.y, pos.now.theta);}

    \textcolor{comment}{//ROS\_INFO("velocity left:  %.4f  and right:  %.4f", 
       ((float)(pos\_delta[left] )/timeDelta), ((float)(pos\_delta[right])/timeDelta) );}

    \textcolor{comment}{//float odomTime = (ros::Time::now() - event.current\_real).toSec();}
    \textcolor{comment}{//ROS\_DEBUG("time taken by odom: %.5f sec", odomTime);}

    \textcolor{comment}{//sicklmsCounter++; //testing laserscanner}
\}
\end{DoxyCode}
\hypertarget{classTankSteering_a99aadf750c50610cfea8732f95e21426}{\index{Tank\-Steering@{Tank\-Steering}!reset\-E\-P\-O\-S2\-Fault@{reset\-E\-P\-O\-S2\-Fault}}
\index{reset\-E\-P\-O\-S2\-Fault@{reset\-E\-P\-O\-S2\-Fault}!TankSteering@{Tank\-Steering}}
\subsubsection[{reset\-E\-P\-O\-S2\-Fault}]{\setlength{\rightskip}{0pt plus 5cm}void Tank\-Steering\-::reset\-E\-P\-O\-S2\-Fault (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}}\label{classTankSteering_a99aadf750c50610cfea8732f95e21426}


bring the E\-P\-O\-S2 into a drive-\/able state. 

this function first reset both E\-P\-O\-S2 and clear afterwards the error history. 

Definition at line 278 of file Tank\-Steering.\-cpp.


\begin{DoxyCode}
\{
    \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=left; i<=right;i++) \{\hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a0c1ff021afbf7602a5593ca973b25246}{epos}[i]->
      \hyperlink{classEpos2MotorController_a257e06f445d5ecc34f1dbae30e63fc9f}{resetDevice}();\}
    ROS\_INFO(\textcolor{stringliteral}{"reset EPOS2 successfully"});
    \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=left; i<=right;i++) \{\hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a0c1ff021afbf7602a5593ca973b25246}{epos}[i]->
      \hyperlink{classEpos2MotorController_a07446045b12515427feda98fea36dab2}{clearFault}();\}
    ROS\_INFO(\textcolor{stringliteral}{"clear EPOS2 fault successfully"});
\}
\end{DoxyCode}
\hypertarget{classTankSteering_ab1335cf95b773d0b8908d74ebb61c289}{\index{Tank\-Steering@{Tank\-Steering}!set\-Velocity\-Callback@{set\-Velocity\-Callback}}
\index{set\-Velocity\-Callback@{set\-Velocity\-Callback}!TankSteering@{Tank\-Steering}}
\subsubsection[{set\-Velocity\-Callback}]{\setlength{\rightskip}{0pt plus 5cm}void Tank\-Steering\-::set\-Velocity\-Callback (
\begin{DoxyParamCaption}
\item[{const ros\-::\-Timer\-Event \&}]{event}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}}\label{classTankSteering_ab1335cf95b773d0b8908d74ebb61c289}


velocity-\/callback-\/function -\/ every time called it will set the target\-Velocity to both E\-P\-O\-S2 


\begin{DoxyParams}{Parameters}
{\em event} & contains some time values according to the event \\
\hline
\end{DoxyParams}


Definition at line 76 of file Tank\-Steering.\-cpp.


\begin{DoxyCode}
\{
    \textcolor{keywordtype}{double} targetVelocityRPM[2];

    \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=left; i<=right; i++) \{targetVelocityRPM[i] = \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}
      .\hyperlink{structTankSteering_1_1tankSet_a895d3b886f7c964e6eb2eb97c3254be0}{factorMPSToRPM} * \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a21505f9f26ad6444c89d0795d35a5127}{targetVelocityMPS}
      [i];\}

    ROS\_DEBUG(\textcolor{stringliteral}{"Try to set Velocity left to %.3f rpm and right to %.3f rpm"}, 
      targetVelocityRPM[left], targetVelocityRPM[right]);
    ROS\_INFO(\textcolor{stringliteral}{"Try to set Velocity left to %.4f m/s and right to %.4f m/s"}, 
      \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a21505f9f26ad6444c89d0795d35a5127}{targetVelocityMPS}[left], \hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}
      .\hyperlink{structTankSteering_1_1tankSet_a21505f9f26ad6444c89d0795d35a5127}{targetVelocityMPS}[right]);

    \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=left; i<=right; i++) \{\hyperlink{classTankSteering_a6973af1afc00c9b11f32ecc7ad7e8a14}{tankSettings}.\hyperlink{structTankSteering_1_1tankSet_a0c1ff021afbf7602a5593ca973b25246}{epos}[i]->
      \hyperlink{classEpos2MotorController_a1b97f5c8fe0c7e2ff3256334c19b7a39}{changeRotationPerMinute}(targetVelocityRPM[i]);\}
\}
\end{DoxyCode}
\hypertarget{classTankSteering_a89990f8796af8d4224752c0e0a0daf47}{\index{Tank\-Steering@{Tank\-Steering}!sign@{sign}}
\index{sign@{sign}!TankSteering@{Tank\-Steering}}
\subsubsection[{sign}]{\setlength{\rightskip}{0pt plus 5cm}int Tank\-Steering\-::sign (
\begin{DoxyParamCaption}
\item[{double}]{number}
\end{DoxyParamCaption}
)}}\label{classTankSteering_a89990f8796af8d4224752c0e0a0daf47}


return if a value is positive, zero or negative 


\begin{DoxyParams}{Parameters}
{\em number} & the value which should be analyzed \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\char`\"{}-\/1\char`\"{} if negative, \char`\"{}0\char`\"{} if zero and \char`\"{}1\char`\"{} if positive 
\end{DoxyReturn}


Definition at line 286 of file Tank\-Steering.\-cpp.


\begin{DoxyCode}
\{
    \textcolor{keywordflow}{return} (number>0) ? 1 : (number<0) ? -1 : 0;
\}
\end{DoxyCode}


The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
src/epos2\-\_\-control/src/Tank\-Steering.\-h\item 
src/epos2\-\_\-control/src/Tank\-Steering.\-cpp\end{DoxyCompactItemize}
