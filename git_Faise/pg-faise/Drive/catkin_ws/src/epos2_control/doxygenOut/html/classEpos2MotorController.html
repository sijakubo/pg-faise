<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>EPOS2MotorController: Epos2MotorController Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">EPOS2MotorController
   </div>
   <div id="projectbrief">EPOS2 on Volksbot with ROS</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&#160;Structure&#160;Index</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Data Fields</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<div class="title">Epos2MotorController Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>EPOS2-MotorController-Class.  
 <a href="classEpos2MotorController.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="Epos2MotorController_8h_source.html">Epos2MotorController.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structEpos2MotorController_1_1accelerationData.html">accelerationData</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">all relevant acceleration values for the motor  <a href="structEpos2MotorController_1_1accelerationData.html#details">More...</a><br/></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structEpos2MotorController_1_1epos2Settings.html">epos2Settings</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Settings Structure with all relevant values.  <a href="structEpos2MotorController_1_1epos2Settings.html#details">More...</a><br/></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structEpos2MotorController_1_1feedForward.html">feedForward</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Feedforward values for a regulator.  <a href="structEpos2MotorController_1_1feedForward.html#details">More...</a><br/></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structEpos2MotorController_1_1gearData.html">gearData</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">all values of the gear between motor and wheel.  <a href="structEpos2MotorController_1_1gearData.html#details">More...</a><br/></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structEpos2MotorController_1_1motorData.html">motorData</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">all relevant Parameter to setup the motor  <a href="structEpos2MotorController_1_1motorData.html#details">More...</a><br/></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structEpos2MotorController_1_1regulator.html">regulator</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure of all regulator values used by the EPOS2.  <a href="structEpos2MotorController_1_1regulator.html#details">More...</a><br/></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structEpos2MotorController_1_1regulatorPI.html">regulatorPI</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gain values for a PI regulator.  <a href="structEpos2MotorController_1_1regulatorPI.html#details">More...</a><br/></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structEpos2MotorController_1_1regulatorPID.html">regulatorPID</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gain value for a PID regulator.  <a href="structEpos2MotorController_1_1regulatorPID.html#details">More...</a><br/></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a5404c60266e24bb6c0ce60153ddcb774"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEpos2MotorController.html#a5404c60266e24bb6c0ce60153ddcb774">Type</a> { <a class="el" href="classEpos2MotorController.html#a5404c60266e24bb6c0ce60153ddcb774a2b4b83649b11351ce20e5f3db7dd19f6">uShortInt</a>, 
<a class="el" href="classEpos2MotorController.html#a5404c60266e24bb6c0ce60153ddcb774a7cd8c8c80092885f086841058f4520a9">uInt</a>, 
<a class="el" href="classEpos2MotorController.html#a5404c60266e24bb6c0ce60153ddcb774ae8b4415995e33e0fdb3318c2bb0ec1fc">uLongInt</a>, 
<a class="el" href="classEpos2MotorController.html#a5404c60266e24bb6c0ce60153ddcb774a6560d2c46b97b38b3c8db72e25563fd2">doubleT</a>
 }</td></tr>
<tr class="memdesc:a5404c60266e24bb6c0ce60153ddcb774"><td class="mdescLeft">&#160;</td><td class="mdescRight">possible Types of Data in the Parameter structures.  <a href="classEpos2MotorController.html#a5404c60266e24bb6c0ce60153ddcb774">More...</a><br/></td></tr>
<tr class="memitem:ab5ec630dfbb90ad674e311187926060c"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060c">EposState</a> { <br/>
&#160;&#160;<a class="el" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060cae6493e2426163b114bea951ab9a419d5">enabled</a>, 
<a class="el" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060caf0eea74682d3d3f21bec6e5b376cf443">disabled</a>, 
<a class="el" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060caa83d02e81212676710b3c6d97cb30119">quickstop</a>, 
<a class="el" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060cae80551bbe5d91631014d56926de2d402">reset</a>, 
<br/>
&#160;&#160;<a class="el" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060ca9c2b33ebbe5a72ad6d09d6af6531237c">fault</a>, 
<a class="el" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060cad38c41836bbe157863e3eae0d308b7ca">unknown</a>
<br/>
 }</td></tr>
<tr class="memdesc:ab5ec630dfbb90ad674e311187926060c"><td class="mdescLeft">&#160;</td><td class="mdescRight">internal state of the MotorController-Object with respect to the state of the EPOS2  <a href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060c">More...</a><br/></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a17d3eddbf93f2fa7622ab734a6c8e615"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEpos2MotorController.html#a17d3eddbf93f2fa7622ab734a6c8e615">Epos2MotorController</a> (int node, int reverseNode, std::string port, unsigned long timeout=0, unsigned long baudrate=0)</td></tr>
<tr class="memdesc:a17d3eddbf93f2fa7622ab734a6c8e615"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor of a MotorController Object to build up a new communication.  <a href="#a17d3eddbf93f2fa7622ab734a6c8e615"></a><br/></td></tr>
<tr class="memitem:a85702068308f7694af8caf78a599ba31"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEpos2MotorController.html#a85702068308f7694af8caf78a599ba31">Epos2MotorController</a> (int node, int reverseNode, void *newDevhandle)</td></tr>
<tr class="memdesc:a85702068308f7694af8caf78a599ba31"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor of a MotorController Object with a given communication handler.  <a href="#a85702068308f7694af8caf78a599ba31"></a><br/></td></tr>
<tr class="memitem:a897a1929a53a5c5211e925eab8792c90"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEpos2MotorController.html#a897a1929a53a5c5211e925eab8792c90">~Epos2MotorController</a> ()</td></tr>
<tr class="memdesc:a897a1929a53a5c5211e925eab8792c90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release the EPOS2.  <a href="#a897a1929a53a5c5211e925eab8792c90"></a><br/></td></tr>
<tr class="memitem:a07446045b12515427feda98fea36dab2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEpos2MotorController.html#a07446045b12515427feda98fea36dab2">clearFault</a> ()</td></tr>
<tr class="memdesc:a07446045b12515427feda98fea36dab2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete all errors in the Error history of this EPOS2.  <a href="#a07446045b12515427feda98fea36dab2"></a><br/></td></tr>
<tr class="memitem:a257e06f445d5ecc34f1dbae30e63fc9f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEpos2MotorController.html#a257e06f445d5ecc34f1dbae30e63fc9f">resetDevice</a> ()</td></tr>
<tr class="memdesc:a257e06f445d5ecc34f1dbae30e63fc9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the State Machine inside the EPOS2.  <a href="#a257e06f445d5ecc34f1dbae30e63fc9f"></a><br/></td></tr>
<tr class="memitem:a0c2778ab028417b907d7a55297ccbd4a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEpos2MotorController.html#a0c2778ab028417b907d7a55297ccbd4a">init</a> (double maxRPM, double wheelPerimeter)</td></tr>
<tr class="memdesc:a0c2778ab028417b907d7a55297ccbd4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">calls a few set-functions, store the settings in the EPOS2 and enable the Device.  <a href="#a0c2778ab028417b907d7a55297ccbd4a"></a><br/></td></tr>
<tr class="memitem:a481615a590e6d1c6bf6c39c426e6d9a6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEpos2MotorController.html#a481615a590e6d1c6bf6c39c426e6d9a6">testForErrorsAndPrint</a> ()</td></tr>
<tr class="memdesc:a481615a590e6d1c6bf6c39c426e6d9a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">read out the error bit and the error history.  <a href="#a481615a590e6d1c6bf6c39c426e6d9a6"></a><br/></td></tr>
<tr class="memitem:aeadc7a21fa6619a4104887f169b9d2fd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEpos2MotorController.html#aeadc7a21fa6619a4104887f169b9d2fd">enableEpos2</a> ()</td></tr>
<tr class="memdesc:aeadc7a21fa6619a4104887f169b9d2fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">set the EPOS2 into enable state  <a href="#aeadc7a21fa6619a4104887f169b9d2fd"></a><br/></td></tr>
<tr class="memitem:ad58ad9fe38c72ce0d457a286973f8a99"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEpos2MotorController.html#ad58ad9fe38c72ce0d457a286973f8a99">disableEpos2</a> ()</td></tr>
<tr class="memdesc:ad58ad9fe38c72ce0d457a286973f8a99"><td class="mdescLeft">&#160;</td><td class="mdescRight">set the EPOS2 into disable state  <a href="#ad58ad9fe38c72ce0d457a286973f8a99"></a><br/></td></tr>
<tr class="memitem:a2e1ad71a3be2943ed7bffd743c4f1fad"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEpos2MotorController.html#a2e1ad71a3be2943ed7bffd743c4f1fad">storeSettings</a> ()</td></tr>
<tr class="memdesc:a2e1ad71a3be2943ed7bffd743c4f1fad"><td class="mdescLeft">&#160;</td><td class="mdescRight">stores all changed Settings in the EPOS2.  <a href="#a2e1ad71a3be2943ed7bffd743c4f1fad"></a><br/></td></tr>
<tr class="memitem:a4f3a4529154e01acb6a15ff94d5c9000"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEpos2MotorController.html#a4f3a4529154e01acb6a15ff94d5c9000">activateProfileVelocity</a> ()</td></tr>
<tr class="memdesc:a4f3a4529154e01acb6a15ff94d5c9000"><td class="mdescLeft">&#160;</td><td class="mdescRight">change the OperationMode of the EPOS2 into ProfileVelocityMode and set the MotionProfile to sin^2-ramp  <a href="#a4f3a4529154e01acb6a15ff94d5c9000"></a><br/></td></tr>
<tr class="memitem:a1b97f5c8fe0c7e2ff3256334c19b7a39"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEpos2MotorController.html#a1b97f5c8fe0c7e2ff3256334c19b7a39">changeRotationPerMinute</a> (double targetVelocityRPM)</td></tr>
<tr class="memdesc:a1b97f5c8fe0c7e2ff3256334c19b7a39"><td class="mdescLeft">&#160;</td><td class="mdescRight">set a target angular velocity for this EPOS2.  <a href="#a1b97f5c8fe0c7e2ff3256334c19b7a39"></a><br/></td></tr>
<tr class="memitem:ac6c31e0dc57485aa817431b22627fc70"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060c">EposState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEpos2MotorController.html#ac6c31e0dc57485aa817431b22627fc70">getEpos2State</a> ()</td></tr>
<tr class="memdesc:ac6c31e0dc57485aa817431b22627fc70"><td class="mdescLeft">&#160;</td><td class="mdescRight">read out the state of the EPOS2 state machine  <a href="#ac6c31e0dc57485aa817431b22627fc70"></a><br/></td></tr>
<tr class="memitem:a07b5def07609a91cba8a1977f6436c0a"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEpos2MotorController.html#a07b5def07609a91cba8a1977f6436c0a">getAbsolutePosition</a> ()</td></tr>
<tr class="memdesc:a07b5def07609a91cba8a1977f6436c0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">read out the current position value depending on the start position.  <a href="#a07b5def07609a91cba8a1977f6436c0a"></a><br/></td></tr>
<tr class="memitem:a6c806fba7028bed11d710c4f453869b1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEpos2MotorController.html#a6c806fba7028bed11d710c4f453869b1">setGearData</a> (<a class="el" href="structEpos2MotorController_1_1gearData.html">gearData</a> *parameter)</td></tr>
<tr class="memdesc:a6c806fba7028bed11d710c4f453869b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">set all Data of the gear into the EPOS2.  <a href="#a6c806fba7028bed11d710c4f453869b1"></a><br/></td></tr>
<tr class="memitem:a43b5c84e3d2c891a98fae2c159d0a112"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEpos2MotorController.html#a43b5c84e3d2c891a98fae2c159d0a112">getGearData</a> (<a class="el" href="structEpos2MotorController_1_1gearData.html">gearData</a> *parameter)</td></tr>
<tr class="memdesc:a43b5c84e3d2c891a98fae2c159d0a112"><td class="mdescLeft">&#160;</td><td class="mdescRight">read out all Data of the gear from the EPOS2  <a href="#a43b5c84e3d2c891a98fae2c159d0a112"></a><br/></td></tr>
<tr class="memitem:a0a5257b20692de37091544e6ed5f6aed"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEpos2MotorController.html#a0a5257b20692de37091544e6ed5f6aed">setMotorData</a> (<a class="el" href="structEpos2MotorController_1_1motorData.html">motorData</a> *parameter)</td></tr>
<tr class="memdesc:a0a5257b20692de37091544e6ed5f6aed"><td class="mdescLeft">&#160;</td><td class="mdescRight">set all Data of the motor into the EPOS2.  <a href="#a0a5257b20692de37091544e6ed5f6aed"></a><br/></td></tr>
<tr class="memitem:a0b70bbbfed4fa0c78a9f15dfb593bb9f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEpos2MotorController.html#a0b70bbbfed4fa0c78a9f15dfb593bb9f">getMotorData</a> (<a class="el" href="structEpos2MotorController_1_1motorData.html">motorData</a> *parameter)</td></tr>
<tr class="memdesc:a0b70bbbfed4fa0c78a9f15dfb593bb9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">read out all Data of the motor from the EPOS2  <a href="#a0b70bbbfed4fa0c78a9f15dfb593bb9f"></a><br/></td></tr>
<tr class="memitem:aada27a05c4f5150f7b2d2b3ec20a8f84"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEpos2MotorController.html#aada27a05c4f5150f7b2d2b3ec20a8f84">setAccelerationData</a> (<a class="el" href="structEpos2MotorController_1_1accelerationData.html">accelerationData</a> *parameter)</td></tr>
<tr class="memdesc:aada27a05c4f5150f7b2d2b3ec20a8f84"><td class="mdescLeft">&#160;</td><td class="mdescRight">set all Data restricting the acceleration into the EPOS2.  <a href="#aada27a05c4f5150f7b2d2b3ec20a8f84"></a><br/></td></tr>
<tr class="memitem:a1ada66b97fd8437591696824080ce434"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEpos2MotorController.html#a1ada66b97fd8437591696824080ce434">getAccelerationData</a> (<a class="el" href="structEpos2MotorController_1_1accelerationData.html">accelerationData</a> *parameter)</td></tr>
<tr class="memdesc:a1ada66b97fd8437591696824080ce434"><td class="mdescLeft">&#160;</td><td class="mdescRight">read out all Data restricting the acceleration from the EPOS2  <a href="#a1ada66b97fd8437591696824080ce434"></a><br/></td></tr>
<tr class="memitem:a60d132d6d79c0b8d49eb5ed721aae790"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEpos2MotorController.html#a60d132d6d79c0b8d49eb5ed721aae790">setMaxRPM</a> (double maxRPM)</td></tr>
<tr class="memdesc:a60d132d6d79c0b8d49eb5ed721aae790"><td class="mdescLeft">&#160;</td><td class="mdescRight">set the highest allowed angular velocity into the EPOS2.  <a href="#a60d132d6d79c0b8d49eb5ed721aae790"></a><br/></td></tr>
<tr class="memitem:ae363c85bc1e9dbad81fd49b06d783ff9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEpos2MotorController.html#ae363c85bc1e9dbad81fd49b06d783ff9">getMaxRPM</a> (double *maxRPM)</td></tr>
<tr class="memdesc:ae363c85bc1e9dbad81fd49b06d783ff9"><td class="mdescLeft">&#160;</td><td class="mdescRight">read out the currently set highest allowed angular velocity from the EPOS2.  <a href="#ae363c85bc1e9dbad81fd49b06d783ff9"></a><br/></td></tr>
<tr class="memitem:a84b2544d4e3facf75ae12a526da2735d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEpos2MotorController.html#a84b2544d4e3facf75ae12a526da2735d">getRegulatorParameter</a> (<a class="el" href="structEpos2MotorController_1_1regulator.html">regulator</a> *parameter)</td></tr>
<tr class="memdesc:a84b2544d4e3facf75ae12a526da2735d"><td class="mdescLeft">&#160;</td><td class="mdescRight">read out all parameter of the regulators from the EPOS2  <a href="#a84b2544d4e3facf75ae12a526da2735d"></a><br/></td></tr>
<tr class="memitem:a42c80ac11a2d4dfcb4f75a573e017164"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEpos2MotorController.html#a42c80ac11a2d4dfcb4f75a573e017164">setRegulatorParameter</a> (<a class="el" href="structEpos2MotorController_1_1regulator.html">regulator</a> *parameter)</td></tr>
<tr class="memdesc:a42c80ac11a2d4dfcb4f75a573e017164"><td class="mdescLeft">&#160;</td><td class="mdescRight">set all parameter of the regulators into the EPOS2.  <a href="#a42c80ac11a2d4dfcb4f75a573e017164"></a><br/></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:a40594faab444bcba221ab9d55d1162cd"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a40594faab444bcba221ab9d55d1162cd"></a>
void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd">devhandle</a></td></tr>
<tr class="memdesc:a40594faab444bcba221ab9d55d1162cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">the device handle for the communication with the EPOS2 <br/></td></tr>
<tr class="memitem:aec7abbd4cd8e70e98f28cae457275e31"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEpos2MotorController.html#aec7abbd4cd8e70e98f28cae457275e31">nodeStr</a></td></tr>
<tr class="memdesc:aec7abbd4cd8e70e98f28cae457275e31"><td class="mdescLeft">&#160;</td><td class="mdescRight">this appears in front of a message published with ROS.  <a href="#aec7abbd4cd8e70e98f28cae457275e31"></a><br/></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:a52b44052a433dd80215f49c7dbb98b90"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <br/>
&#160;&#160;<b>debug</b>, 
<b>info</b>, 
<b>warn</b>, 
<b>error</b>, 
<br/>
&#160;&#160;<b>fatal</b>
<br/>
 }</td></tr>
<tr class="memdesc:a52b44052a433dd80215f49c7dbb98b90"><td class="mdescLeft">&#160;</td><td class="mdescRight">all possible internal Errorlevel for a published message <br/></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a2ff727bd7ad81302c2feaaf297d888ae"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEpos2MotorController.html#a2ff727bd7ad81302c2feaaf297d888ae">setSpin</a> (int reverse)</td></tr>
<tr class="memdesc:a2ff727bd7ad81302c2feaaf297d888ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">set the positive direction of movement into the EPOS2.  <a href="#a2ff727bd7ad81302c2feaaf297d888ae"></a><br/></td></tr>
<tr class="memitem:a8eb9d184e96079a5a995776cf3a453f2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEpos2MotorController.html#a8eb9d184e96079a5a995776cf3a453f2">setDimensionAndNotation</a> ()</td></tr>
<tr class="memdesc:a8eb9d184e96079a5a995776cf3a453f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">set how the numbers sending to the EPOS2 will be interpreted.  <a href="#a8eb9d184e96079a5a995776cf3a453f2"></a><br/></td></tr>
<tr class="memitem:a64d5e3e3858597c111e60ba8b382a63b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b">errorOutput</a> (std::string errorText, int errorLevel=info, long int errorBit=1, unsigned int errorCode=0)</td></tr>
<tr class="memdesc:a64d5e3e3858597c111e60ba8b382a63b"><td class="mdescLeft">&#160;</td><td class="mdescRight">puts out a text message into ros standard output.  <a href="#a64d5e3e3858597c111e60ba8b382a63b"></a><br/></td></tr>
<tr class="memitem:a6a3f76a6ed867ed6847d9ebac01136ea"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEpos2MotorController.html#a6a3f76a6ed867ed6847d9ebac01136ea">initCommunication</a> (std::string port, unsigned long baudrate, unsigned long timeout)</td></tr>
<tr class="memdesc:a6a3f76a6ed867ed6847d9ebac01136ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">build up the communication to a plugged EPOS2.  <a href="#a6a3f76a6ed867ed6847d9ebac01136ea"></a><br/></td></tr>
<tr class="memitem:a8fc2ecc7f9b6398382a96c760dace71a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEpos2MotorController.html#a8fc2ecc7f9b6398382a96c760dace71a">errorIfNotBiggerZero</a> (double number, std::string varName)</td></tr>
<tr class="memdesc:a8fc2ecc7f9b6398382a96c760dace71a"><td class="mdescLeft">&#160;</td><td class="mdescRight">checks if a given number is positive and nonzero.  <a href="#a8fc2ecc7f9b6398382a96c760dace71a"></a><br/></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a0856f5fdd71ffa3b84a536afa085bfb1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0856f5fdd71ffa3b84a536afa085bfb1"></a>
struct <br class="typebreak"/>
<a class="el" href="structEpos2MotorController_1_1epos2Settings.html">Epos2MotorController::epos2Settings</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1">epos2MotorSet</a></td></tr>
<tr class="memdesc:a0856f5fdd71ffa3b84a536afa085bfb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Settings for the EPOS2. <br/></td></tr>
<tr class="memitem:a7194b8efd4f2fd5a4d64b10135c416e2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060c">EposState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEpos2MotorController.html#a7194b8efd4f2fd5a4d64b10135c416e2">state</a></td></tr>
<tr class="memdesc:a7194b8efd4f2fd5a4d64b10135c416e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">the state inside this class depending on the state of the EPOS2  <a href="#a7194b8efd4f2fd5a4d64b10135c416e2"></a><br/></td></tr>
</table>
<a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>EPOS2-MotorController-Class. </p>
<p>It's used to control one EPOS2. </p>

<p>Definition at line <a class="el" href="Epos2MotorController_8h_source.html#l00022">22</a> of file <a class="el" href="Epos2MotorController_8h_source.html">Epos2MotorController.h</a>.</p>
</div><h2>Member Enumeration Documentation</h2>
<a class="anchor" id="ab5ec630dfbb90ad674e311187926060c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060c">Epos2MotorController::EposState</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>internal state of the MotorController-Object with respect to the state of the EPOS2 </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="ab5ec630dfbb90ad674e311187926060cae6493e2426163b114bea951ab9a419d5"></a>enabled</em>&nbsp;</td><td>
<p>EPOS2 is ready for driving. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ab5ec630dfbb90ad674e311187926060caf0eea74682d3d3f21bec6e5b376cf443"></a>disabled</em>&nbsp;</td><td>
<p>EPOS2 is started but not ready for driving. </p>
<p>Changing of the most Settings in the EPOS2 only possible in this mode. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ab5ec630dfbb90ad674e311187926060caa83d02e81212676710b3c6d97cb30119"></a>quickstop</em>&nbsp;</td><td>
<p>Safety brake. </p>
<p>EPOS2 is started and stop the motor. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ab5ec630dfbb90ad674e311187926060cae80551bbe5d91631014d56926de2d402"></a>reset</em>&nbsp;</td><td>
<p>before deleting Faults you had to reset all EPOS2. </p>
<p>no corresponding state in EPOS2. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ab5ec630dfbb90ad674e311187926060ca9c2b33ebbe5a72ad6d09d6af6531237c"></a>fault</em>&nbsp;</td><td>
<p>no movement is possible. </p>
<p>A text message with detail infos will be generated </p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="classEpos2MotorController.html#a481615a590e6d1c6bf6c39c426e6d9a6" title="read out the error bit and the error history.">testForErrorsAndPrint()</a> </dd></dl>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ab5ec630dfbb90ad674e311187926060cad38c41836bbe157863e3eae0d308b7ca"></a>unknown</em>&nbsp;</td><td>
<p>couldn't read state. </p>
<p>Maybe no connection to the EPOS2. </p>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="Epos2MotorController_8h_source.html#l00062">62</a> of file <a class="el" href="Epos2MotorController_8h_source.html">Epos2MotorController.h</a>.</p>
<div class="fragment"><div class="line">        {</div>
<div class="line">            <a class="code" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060cae6493e2426163b114bea951ab9a419d5" title="EPOS2 is ready for driving.">enabled</a>,    </div>
<div class="line">            <a class="code" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060caf0eea74682d3d3f21bec6e5b376cf443" title="EPOS2 is started but not ready for driving.">disabled</a>,   </div>
<div class="line">            <a class="code" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060caa83d02e81212676710b3c6d97cb30119" title="Safety brake.">quickstop</a>,  </div>
<div class="line">            <a class="code" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060cae80551bbe5d91631014d56926de2d402" title="before deleting Faults you had to reset all EPOS2.">reset</a>,  </div>
<div class="line">            <a class="code" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060ca9c2b33ebbe5a72ad6d09d6af6531237c" title="no movement is possible.">fault</a>,  </div>
<div class="line">            <a class="code" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060cad38c41836bbe157863e3eae0d308b7ca" title="couldn&#39;t read state.">unknown</a> </div>
<div class="line">        };</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5404c60266e24bb6c0ce60153ddcb774"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classEpos2MotorController.html#a5404c60266e24bb6c0ce60153ddcb774">Epos2MotorController::Type</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>possible Types of Data in the Parameter structures. </p>
<p>Equation in c++ data Types </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a5404c60266e24bb6c0ce60153ddcb774a2b4b83649b11351ce20e5f3db7dd19f6"></a>uShortInt</em>&nbsp;</td><td>
<p>unsigned short int </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a5404c60266e24bb6c0ce60153ddcb774a7cd8c8c80092885f086841058f4520a9"></a>uInt</em>&nbsp;</td><td>
<p>unsigned int </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a5404c60266e24bb6c0ce60153ddcb774ae8b4415995e33e0fdb3318c2bb0ec1fc"></a>uLongInt</em>&nbsp;</td><td>
<p>unsigned long int </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a5404c60266e24bb6c0ce60153ddcb774a6560d2c46b97b38b3c8db72e25563fd2"></a>doubleT</em>&nbsp;</td><td>
<p>double </p>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="Epos2MotorController_8h_source.html#l00051">51</a> of file <a class="el" href="Epos2MotorController_8h_source.html">Epos2MotorController.h</a>.</p>
<div class="fragment"><div class="line">        {</div>
<div class="line">            <a class="code" href="classEpos2MotorController.html#a5404c60266e24bb6c0ce60153ddcb774a2b4b83649b11351ce20e5f3db7dd19f6" title="unsigned short int">uShortInt</a>,  </div>
<div class="line">            <a class="code" href="classEpos2MotorController.html#a5404c60266e24bb6c0ce60153ddcb774a7cd8c8c80092885f086841058f4520a9" title="unsigned int">uInt</a>,   </div>
<div class="line">            <a class="code" href="classEpos2MotorController.html#a5404c60266e24bb6c0ce60153ddcb774ae8b4415995e33e0fdb3318c2bb0ec1fc" title="unsigned long int">uLongInt</a>,   </div>
<div class="line">            <a class="code" href="classEpos2MotorController.html#a5404c60266e24bb6c0ce60153ddcb774a6560d2c46b97b38b3c8db72e25563fd2" title="double">doubleT</a> </div>
<div class="line">        };</div>
</div><!-- fragment -->
</div>
</div>
<h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a17d3eddbf93f2fa7622ab734a6c8e615"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Epos2MotorController::Epos2MotorController </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>reverseNode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>timeout</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>baudrate</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor of a MotorController Object to build up a new communication. </p>
<p>Only use once for a bunch of a EPOS2 connected among themselves by CAN.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>the internal node number of the EPOS2 you want to connect to </td></tr>
    <tr><td class="paramname">reverseNode</td><td>if it's 1 the positive direction of movement will be switched </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="classEpos2MotorController.html#a2ff727bd7ad81302c2feaaf297d888ae" title="set the positive direction of movement into the EPOS2.">setSpin()</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>the name of the port where the EPOS2 is connected (USB0, USB1, ... or /dev/ttyS0, /dev/ttyS1, ...) </td></tr>
    <tr><td class="paramname">timeout</td><td>[ms] If there is no response from the EPOS2 within this time, you will get a communication error. If it's zero or not set, a value of 750 will be used. </td></tr>
    <tr><td class="paramname">baudrate</td><td>[bit/s] the frequency for the communication. If it's not set or zero, it will be set to 1000000 (USB) or 115200 (RS232 - Serial) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Epos2MotorController_8cpp_source.html#l00035">35</a> of file <a class="el" href="Epos2MotorController_8cpp_source.html">Epos2MotorController.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a> = nodeNr;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#adf387ce695bf432caace5e216dda3429" title="[-] the Ratio of the Gear between Motor and wheel">gearRatio</a> = 0;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#abf2ed391ef59f5d99d7e6a9300f59ac3" title="indicates if this EPOS2 has build up the communication or just get a handle">master</a> = 1;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#a7bc89f766fbe9abcb503572714422658" title="[rev/min] highest allowed angular velocity">maxRotationPerMinute</a> = 0;</div>
<div class="line">    <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#af14c93f519f8ecee21ab4eddfb2a2230" title="defines the positive direction of the rotation">reverse</a> = reverseNode;</div>
<div class="line"></div>
<div class="line">    <span class="comment">//ROS_ERROR(&quot;port: %s&quot;, port);</span></div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> ( !(<a class="code" href="classEpos2MotorController.html#a6a3f76a6ed867ed6847d9ebac01136ea" title="build up the communication to a plugged EPOS2.">initCommunication</a>(port, baudrate, timeout)) ) {</div>
<div class="line">        <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;get device-handle - not valid. Please try again.&quot;</span>, fatal);</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;constructor - can&#39;t get a connection&quot;</span>, debug);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a85702068308f7694af8caf78a599ba31"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Epos2MotorController::Epos2MotorController </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>reverseNode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>newDevhandle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor of a MotorController Object with a given communication handler. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>the internal node number of the EPOS2 you want to connect to </td></tr>
    <tr><td class="paramname">reverseNode</td><td>if it's 1 the positive direction of movement will be switched </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="classEpos2MotorController.html#a2ff727bd7ad81302c2feaaf297d888ae" title="set the positive direction of movement into the EPOS2.">setSpin()</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">newDevhandle</td><td>a device handle from another EPOS2 connected on the same wire (USB or RS232; among themselves the EPOS2 should be connected over CAN) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Epos2MotorController_8cpp_source.html#l00014">14</a> of file <a class="el" href="Epos2MotorController_8cpp_source.html">Epos2MotorController.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a> = nodeNr;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#adf387ce695bf432caace5e216dda3429" title="[-] the Ratio of the Gear between Motor and wheel">gearRatio</a> = 0;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#abf2ed391ef59f5d99d7e6a9300f59ac3" title="indicates if this EPOS2 has build up the communication or just get a handle">master</a> = 0;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#a7bc89f766fbe9abcb503572714422658" title="[rev/min] highest allowed angular velocity">maxRotationPerMinute</a> = 0;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#af14c93f519f8ecee21ab4eddfb2a2230" title="defines the positive direction of the rotation">reverse</a> = reverseNode;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (newDevhandle != 0) {</div>
<div class="line">        this-&gt;<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a> = newDevhandle;</div>
<div class="line">        <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;constructor - devhandle is valid&quot;</span>, debug);</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;new device-handle - not valid. Please try again.&quot;</span>, fatal);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a897a1929a53a5c5211e925eab8792c90"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Epos2MotorController::~Epos2MotorController </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Release the EPOS2. </p>
<p>All EPOS2 will be set into disable state. Only the EPOS2 which build up the communication ("master") release also the device. Maybe it's not a good idea to release the master before the other EPOS2(s) connected over CAN to this master. </p>

<p>Definition at line <a class="el" href="Epos2MotorController_8cpp_source.html#l00056">56</a> of file <a class="el" href="Epos2MotorController_8cpp_source.html">Epos2MotorController.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> errorCode=0;</div>
<div class="line">    <span class="keywordtype">int</span> bit=0;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="classEpos2MotorController.html#ad58ad9fe38c72ce0d457a286973f8a99" title="set the EPOS2 into disable state">disableEpos2</a>();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#abf2ed391ef59f5d99d7e6a9300f59ac3" title="indicates if this EPOS2 has build up the communication or just get a handle">master</a> == 1) {</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a> != 0) {</div>
<div class="line">            bit = VCS_CloseDevice(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, &amp;errorCode);</div>
<div class="line">            <span class="keywordflow">if</span> (!bit) {<a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;Can&#39;t release the Epos2-Device&quot;</span>, error, bit, errorCode);}</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            bit = VCS_CloseAllDevices(&amp;errorCode);</div>
<div class="line">            <span class="keywordflow">if</span> (!bit) {<a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;can&#39;t disconnect a Epos2-Device, because no Epos2 is connected&quot;</span>, debug, bit, errorCode);}</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;Epos2MotorController closed&quot;</span>, info);</div>
<div class="line"></div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<h2>Member Function Documentation</h2>
<a class="anchor" id="a4f3a4529154e01acb6a15ff94d5c9000"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Epos2MotorController::activateProfileVelocity </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>change the OperationMode of the EPOS2 into ProfileVelocityMode and set the MotionProfile to sin^2-ramp </p>
<dl class="section return"><dt>Returns</dt><dd>1 if successful otherwise 0 </dd></dl>

<p>Definition at line <a class="el" href="Epos2MotorController_8cpp_source.html#l00234">234</a> of file <a class="el" href="Epos2MotorController_8cpp_source.html">Epos2MotorController.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> bit=0, j=0;</div>
<div class="line">    <span class="keywordtype">char</span> mode = 0;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> errorCode=0, bytesWritten;</div>
<div class="line">    <span class="keywordtype">short</span> <span class="keywordtype">int</span> value = 1;</div>
<div class="line"></div>
<div class="line">    bit = VCS_SetObject(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, 0x6086, 0x00, &amp;value, 1, &amp;bytesWritten, &amp;errorCode);</div>
<div class="line">    <span class="keywordflow">if</span> (!bit) {</div>
<div class="line">        <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;set MotionProfileType to sin^2-ramp&quot;</span>, error, bit, errorCode);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">do</span> {</div>
<div class="line">        bit = VCS_SetOperationMode(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, OMD_PROFILE_VELOCITY_MODE, &amp;errorCode);</div>
<div class="line">        <span class="keywordflow">if</span> (!bit) {<a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;setting Mode to ProfileVelocity - not possible&quot;</span>, error, bit, errorCode);}</div>
<div class="line"></div>
<div class="line">        j++;</div>
<div class="line"></div>
<div class="line">        bit = VCS_GetOperationMode(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, &amp;mode, &amp;errorCode);</div>
<div class="line">        <span class="keywordflow">if</span> (!bit) {</div>
<div class="line">            <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;unable to read OperationMode&quot;</span>, info, bit, errorCode);</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;read Mode&quot;</span>, info, mode);</div>
<div class="line">        }</div>
<div class="line">    } <span class="keywordflow">while</span> (mode != OMD_PROFILE_VELOCITY_MODE &amp;&amp; j &lt; 4);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (mode == OMD_PROFILE_VELOCITY_MODE) {</div>
<div class="line"></div>
<div class="line">        j=0;</div>
<div class="line">        <span class="keywordflow">do</span> {</div>
<div class="line">            bit = VCS_ActivateProfileVelocityMode(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, &amp;errorCode);</div>
<div class="line">            j++;</div>
<div class="line">        } <span class="keywordflow">while</span> (bit == 0 &amp;&amp; j &lt; 4);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (bit == 0) {</div>
<div class="line">            <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;can&#39;t activate ProfilVelocityMode&quot;</span>, error, bit, errorCode);</div>
<div class="line">            <span class="keywordflow">return</span> 0;</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;activate ProfileVelocityMode successful&quot;</span>);</div>
<div class="line">            <span class="keywordflow">return</span> 1;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line"></div>
<div class="line">        <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;setting Mode to ProfileVelocity (unknown error) Mode&quot;</span>, error, mode);</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1b97f5c8fe0c7e2ff3256334c19b7a39"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Epos2MotorController::changeRotationPerMinute </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>targetVelocityRPM</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>set a target angular velocity for this EPOS2. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">targetVelocityRPM</td><td>[rev/min] angular velocity target of the wheel (not on motor side of the gear) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if successful otherwise 0 </dd></dl>

<p>Definition at line <a class="el" href="Epos2MotorController_8cpp_source.html#l00284">284</a> of file <a class="el" href="Epos2MotorController_8cpp_source.html">Epos2MotorController.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> bit=0;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> errorCode=0;</div>
<div class="line">    <span class="keywordtype">double</span> absoluteTargetVelocityRPM = fabs(targetVelocityRPM);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> ( <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#a7bc89f766fbe9abcb503572714422658" title="[rev/min] highest allowed angular velocity">maxRotationPerMinute</a> &gt;= absoluteTargetVelocityRPM ) {</div>
<div class="line">        <span class="keywordflow">if</span> (absoluteTargetVelocityRPM &lt; 0.2) {  <span class="comment">//stop motor</span></div>
<div class="line">            bit = VCS_HaltVelocityMovement(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, &amp;errorCode);</div>
<div class="line">            <span class="keywordflow">if</span> (!bit) {</div>
<div class="line">                <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;stop Motor&quot;</span>, error, bit, errorCode);</div>
<div class="line">                <span class="keywordflow">return</span> 0;</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;stop motor&quot;</span>);</div>
<div class="line">                <span class="keywordflow">return</span> 1;</div>
<div class="line">            }</div>
<div class="line">        } <span class="keywordflow">else</span> {    <span class="comment">//start motor with gearRatio*rpm</span></div>
<div class="line">            bit = VCS_MoveWithVelocity(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, (<span class="keywordtype">long</span> <span class="keywordtype">int</span>) (targetVelocityRPM * 1000 * <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#adf387ce695bf432caace5e216dda3429" title="[-] the Ratio of the Gear between Motor and wheel">gearRatio</a>), &amp;errorCode);</div>
<div class="line">            <span class="keywordtype">char</span> velString[30];</div>
<div class="line">            sprintf(velString, <span class="stringliteral">&quot;set Speed to %.3f rpm&quot;</span>, targetVelocityRPM);</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span> (!bit) {</div>
<div class="line">                <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>( velString, error, bit, errorCode);</div>
<div class="line">                <span class="keywordflow">return</span> 0;</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(velString);</div>
<div class="line">                <span class="keywordflow">return</span> 1;</div>
<div class="line">            }</div>
<div class="line">        }<span class="comment">//end rpm==0</span></div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        ROS_WARN(<span class="stringliteral">&quot;speed wasn&#39;t changed. Absolute Values greater then the maximal velocity are not allowed.&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    }<span class="comment">//end maxRPM &gt;= rpm</span></div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a07446045b12515427feda98fea36dab2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Epos2MotorController::clearFault </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete all errors in the Error history of this EPOS2. </p>
<dl class="section return"><dt>Returns</dt><dd>1 if successful otherwise 0 </dd></dl>

<p>Definition at line <a class="el" href="Epos2MotorController_8cpp_source.html#l00096">96</a> of file <a class="el" href="Epos2MotorController_8cpp_source.html">Epos2MotorController.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> bit=0;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> errorCode=0;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="classEpos2MotorController.html#a7194b8efd4f2fd5a4d64b10135c416e2" title="the state inside this class depending on the state of the EPOS2">state</a> == <a class="code" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060cae80551bbe5d91631014d56926de2d402" title="before deleting Faults you had to reset all EPOS2.">reset</a>) {</div>
<div class="line">        bit = VCS_ClearFault(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, &amp;errorCode);</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        ROS_ERROR(<span class="stringliteral">&quot;EPOS2-Device was not reset. Please use resetDevice() first.&quot;</span>);</div>
<div class="line">        bit = 1; <span class="comment">//set, to get a new state...</span></div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (!bit) {</div>
<div class="line">        <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;clear errors&quot;</span>, error, bit, errorCode);</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <a class="code" href="classEpos2MotorController.html#a7194b8efd4f2fd5a4d64b10135c416e2" title="the state inside this class depending on the state of the EPOS2">state</a> = <a class="code" href="classEpos2MotorController.html#ac6c31e0dc57485aa817431b22627fc70" title="read out the state of the EPOS2 state machine">getEpos2State</a>();</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad58ad9fe38c72ce0d457a286973f8a99"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Epos2MotorController::disableEpos2 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>set the EPOS2 into disable state </p>
<dl class="section return"><dt>Returns</dt><dd>1 if successful otherwise 0 </dd></dl>

<p>Definition at line <a class="el" href="Epos2MotorController_8cpp_source.html#l00190">190</a> of file <a class="el" href="Epos2MotorController_8cpp_source.html">Epos2MotorController.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> bit=0;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> errorCode=0;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="classEpos2MotorController.html#a7194b8efd4f2fd5a4d64b10135c416e2" title="the state inside this class depending on the state of the EPOS2">state</a> = <a class="code" href="classEpos2MotorController.html#ac6c31e0dc57485aa817431b22627fc70" title="read out the state of the EPOS2 state machine">getEpos2State</a>();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="classEpos2MotorController.html#a7194b8efd4f2fd5a4d64b10135c416e2" title="the state inside this class depending on the state of the EPOS2">state</a> &lt;= <a class="code" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060caa83d02e81212676710b3c6d97cb30119" title="Safety brake.">quickstop</a>) {</div>
<div class="line">        VCS_SetDisableState(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, &amp;errorCode);</div>
<div class="line">        <a class="code" href="classEpos2MotorController.html#a7194b8efd4f2fd5a4d64b10135c416e2" title="the state inside this class depending on the state of the EPOS2">state</a> = <a class="code" href="classEpos2MotorController.html#ac6c31e0dc57485aa817431b22627fc70" title="read out the state of the EPOS2 state machine">getEpos2State</a>();</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="classEpos2MotorController.html#a7194b8efd4f2fd5a4d64b10135c416e2" title="the state inside this class depending on the state of the EPOS2">state</a> == <a class="code" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060caf0eea74682d3d3f21bec6e5b376cf443" title="EPOS2 is started but not ready for driving.">disabled</a>) {</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;SetDisable&quot;</span>, error, bit, errorCode);</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aeadc7a21fa6619a4104887f169b9d2fd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Epos2MotorController::enableEpos2 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>set the EPOS2 into enable state </p>
<dl class="section return"><dt>Returns</dt><dd>1 if successful otherwise 0 </dd></dl>

<p>Definition at line <a class="el" href="Epos2MotorController_8cpp_source.html#l00169">169</a> of file <a class="el" href="Epos2MotorController_8cpp_source.html">Epos2MotorController.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> bit=0;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> errorCode=0;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="classEpos2MotorController.html#a7194b8efd4f2fd5a4d64b10135c416e2" title="the state inside this class depending on the state of the EPOS2">state</a> = <a class="code" href="classEpos2MotorController.html#ac6c31e0dc57485aa817431b22627fc70" title="read out the state of the EPOS2 state machine">getEpos2State</a>();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="classEpos2MotorController.html#a7194b8efd4f2fd5a4d64b10135c416e2" title="the state inside this class depending on the state of the EPOS2">state</a> &lt;= <a class="code" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060caa83d02e81212676710b3c6d97cb30119" title="Safety brake.">quickstop</a>) {</div>
<div class="line">        VCS_SetEnableState(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, &amp;errorCode);</div>
<div class="line">        <a class="code" href="classEpos2MotorController.html#a7194b8efd4f2fd5a4d64b10135c416e2" title="the state inside this class depending on the state of the EPOS2">state</a> = <a class="code" href="classEpos2MotorController.html#ac6c31e0dc57485aa817431b22627fc70" title="read out the state of the EPOS2 state machine">getEpos2State</a>();</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="classEpos2MotorController.html#a7194b8efd4f2fd5a4d64b10135c416e2" title="the state inside this class depending on the state of the EPOS2">state</a> == <a class="code" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060cae6493e2426163b114bea951ab9a419d5" title="EPOS2 is ready for driving.">enabled</a>) {</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;SetEnable&quot;</span>, error, bit, errorCode);</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8fc2ecc7f9b6398382a96c760dace71a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int Epos2MotorController::errorIfNotBiggerZero </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>varName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>checks if a given number is positive and nonzero. </p>
<p>if not an error will be send to ros output</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">number</td><td>the number which should be checked </td></tr>
    <tr><td class="paramname">varName</td><td>this name will be published in the Error message if the number is negative or zero</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if not negative or zero otherwise 0 </dd></dl>

<p>Definition at line <a class="el" href="Epos2MotorController_8cpp_source.html#l00902">902</a> of file <a class="el" href="Epos2MotorController_8cpp_source.html">Epos2MotorController.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (number &gt; 0) {</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;Parameter &quot;</span> + varName + <span class="stringliteral">&quot; isn&#39;t greater than zero. Please change it before running the EPOS2.&quot;</span>, error);</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a64d5e3e3858597c111e60ba8b382a63b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Epos2MotorController::errorOutput </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>errorText</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>errorLevel</em> = <code>info</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long int&#160;</td>
          <td class="paramname"><em>errorBit</em> = <code>1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>errorCode</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>puts out a text message into ros standard output. </p>
<p>the pattern is like this: [%nodeStr%] %errorText%%errorStr% while %errorText% will be replaced by the given function parameter, %nodeStr% is a global member of this class with the name of the Node and %errorStr% is a text message generated by the EPOS library when a errorBit unequal 1 or an errorCode unequal 0 is given</p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="classEpos2MotorController.html#aec7abbd4cd8e70e98f28cae457275e31" title="this appears in front of a message published with ROS.">nodeStr</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">errorText</td><td>the message which should be printed </td></tr>
    <tr><td class="paramname">errorLevel</td><td>the ROS ErrorLevel on which the message should be published </td></tr>
    <tr><td class="paramname">errorBit</td><td>just an integer. most functions of the EPOS library give back an integer value. </td></tr>
    <tr><td class="paramname">errorCode</td><td>an errorCode returned by a function of the EPOS library. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Epos2MotorController_8cpp_source.html#l00799">799</a> of file <a class="el" href="Epos2MotorController_8cpp_source.html">Epos2MotorController.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> bit=0;                  <span class="comment">//control-bit for the return of functions</span></div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> maxStr=100;  <span class="comment">//max stringsize</span></div>
<div class="line">    <span class="keywordtype">char</span> errorInfo[maxStr];     <span class="comment">//errorstring</span></div>
<div class="line">    <span class="keywordtype">char</span> errorStr[200];</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (errorBit != 1 || errorCode != 0) {</div>
<div class="line">        bit = VCS_GetErrorInfo(errorCode, errorInfo, maxStr);   <span class="comment">//get the ErrorString</span></div>
<div class="line">        <span class="keywordflow">if</span> (bit) {  <span class="comment">//Output for known Errors</span></div>
<div class="line">            sprintf(errorStr, <span class="stringliteral">&quot; with Errorbit: %li &amp; Error: %s (0x%x)&quot;</span>, errorBit, errorInfo, errorCode);</div>
<div class="line">        } <span class="keywordflow">else</span> {    <span class="comment">//Output if there is no ErrorString</span></div>
<div class="line">            ROS_ERROR(<span class="stringliteral">&quot;Can&#39;t read ErrorCode with the VCS_GetErrorInfo-Function from the EPOS2-Library!&quot;</span>);</div>
<div class="line">            sprintf(errorStr, <span class="stringliteral">&quot; with Errorbit: %li &amp; Error: NO DESCRIPTION (0x%x)&quot;</span>, errorBit, errorCode);</div>
<div class="line">        }</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        bit = 1;</div>
<div class="line">        sprintf(errorStr,<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">switch</span>(errorLevel) {</div>
<div class="line">    <span class="keywordflow">case</span> debug: ROS_DEBUG(<span class="stringliteral">&quot;[%s] %s%s&quot;</span>, <a class="code" href="classEpos2MotorController.html#aec7abbd4cd8e70e98f28cae457275e31" title="this appears in front of a message published with ROS.">nodeStr</a>, errorText.c_str(), errorStr);</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> info:  ROS_INFO(<span class="stringliteral">&quot;[%s] %s%s&quot;</span>, <a class="code" href="classEpos2MotorController.html#aec7abbd4cd8e70e98f28cae457275e31" title="this appears in front of a message published with ROS.">nodeStr</a>, errorText.c_str(), errorStr);</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> warn:  ROS_WARN(<span class="stringliteral">&quot;[%s] %s%s&quot;</span>, <a class="code" href="classEpos2MotorController.html#aec7abbd4cd8e70e98f28cae457275e31" title="this appears in front of a message published with ROS.">nodeStr</a>, errorText.c_str(), errorStr);</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> error: ROS_ERROR(<span class="stringliteral">&quot;[%s] %s%s&quot;</span>, <a class="code" href="classEpos2MotorController.html#aec7abbd4cd8e70e98f28cae457275e31" title="this appears in front of a message published with ROS.">nodeStr</a>, errorText.c_str(), errorStr);</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> fatal: ROS_FATAL(<span class="stringliteral">&quot;[%s] %s%s&quot;</span>, <a class="code" href="classEpos2MotorController.html#aec7abbd4cd8e70e98f28cae457275e31" title="this appears in front of a message published with ROS.">nodeStr</a>, errorText.c_str(), errorStr);</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">default</span>:    ROS_WARN(<span class="stringliteral">&quot;Unknown Errorlevel: [%s] %s%s&quot;</span>, <a class="code" href="classEpos2MotorController.html#aec7abbd4cd8e70e98f28cae457275e31" title="this appears in front of a message published with ROS.">nodeStr</a>, errorText.c_str(), errorStr);</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a07b5def07609a91cba8a1977f6436c0a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double Epos2MotorController::getAbsolutePosition </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>read out the current position value depending on the start position. </p>
<p>convert the encoder ticks into [rev/min] of the wheel (after gear)</p>
<dl class="section return"><dt>Returns</dt><dd>[rev/min] Rotations count from start position </dd></dl>

<p>Definition at line <a class="el" href="Epos2MotorController_8cpp_source.html#l00353">353</a> of file <a class="el" href="Epos2MotorController_8cpp_source.html">Epos2MotorController.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> bit=0;</div>
<div class="line">    <span class="keywordtype">long</span> <span class="keywordtype">int</span> value;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> errorCode=0;</div>
<div class="line"></div>
<div class="line">    bit = VCS_GetPositionIs(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, &amp;value, &amp;errorCode);</div>
<div class="line">    <span class="keywordflow">if</span> (!bit) {<a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;Can&#39;t read actual positionValue&quot;</span>, warn, bit, errorCode);}</div>
<div class="line"></div>
<div class="line">    <span class="comment">//rotations = ((double)(value)) / (2000 * epos2MotorSet.gearRatio);</span></div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> ((<span class="keywordtype">double</span>)(value)) * 0.0005 / <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#adf387ce695bf432caace5e216dda3429" title="[-] the Ratio of the Gear between Motor and wheel">gearRatio</a>;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1ada66b97fd8437591696824080ce434"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Epos2MotorController::getAccelerationData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structEpos2MotorController_1_1accelerationData.html">accelerationData</a> *&#160;</td>
          <td class="paramname"><em>parameter</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>read out all Data restricting the acceleration from the EPOS2 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*parameter</td><td>structure for all relevant acceleration data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if successful otherwise 0 </dd></dl>

<p>Definition at line <a class="el" href="Epos2MotorController_8cpp_source.html#l00541">541</a> of file <a class="el" href="Epos2MotorController_8cpp_source.html">Epos2MotorController.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> bit = 0;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> errorCode, bytesRead;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> value, value2;</div>
<div class="line"></div>
<div class="line">    <span class="comment">//init</span></div>
<div class="line">    parameter-&gt;maxAcceleration = 0.51;</div>
<div class="line">    parameter-&gt;profileAcceleration = 0.4;</div>
<div class="line">    parameter-&gt;profileDeceleration = 0.4;</div>
<div class="line">    parameter-&gt;quickstopDeceleration = 0.5;</div>
<div class="line"></div>
<div class="line">    <span class="comment">//getting-functions-units are [rev/(min * s)] and output-units are [m/(s^2)]</span></div>
<div class="line"></div>
<div class="line">    bit = VCS_GetObject(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, 0x60c5, 0x00, &amp;value, 2, &amp;bytesRead, &amp;errorCode);</div>
<div class="line">    <span class="keywordflow">if</span> (!bit) {</div>
<div class="line">        <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;get max Acceleration&quot;</span>, error, bit, errorCode);</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        parameter-&gt;maxAcceleration = ((double) value) * <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab7dfe30a4a13813163437d4d54fa053d" title="[m] the Perimeter of one wheel">wheelPerimeter</a> / (60 * <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#adf387ce695bf432caace5e216dda3429" title="[-] the Ratio of the Gear between Motor and wheel">gearRatio</a>);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    bit = VCS_GetVelocityProfile(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, &amp;value, &amp;value2, &amp;errorCode);</div>
<div class="line">    <span class="keywordflow">if</span> (!bit) {</div>
<div class="line">        <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;get velocity profile acceleration and deceleration&quot;</span>, error, bit, errorCode);</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        parameter-&gt;profileAcceleration = ((double) value) * <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab7dfe30a4a13813163437d4d54fa053d" title="[m] the Perimeter of one wheel">wheelPerimeter</a> / (60 * <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#adf387ce695bf432caace5e216dda3429" title="[-] the Ratio of the Gear between Motor and wheel">gearRatio</a>);</div>
<div class="line">        parameter-&gt;profileDeceleration = ((double) value2) * <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab7dfe30a4a13813163437d4d54fa053d" title="[m] the Perimeter of one wheel">wheelPerimeter</a> / (60 * <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#adf387ce695bf432caace5e216dda3429" title="[-] the Ratio of the Gear between Motor and wheel">gearRatio</a>);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    bit = VCS_GetObject(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, 0x6085, 0x00, &amp;value, 2, &amp;bytesRead, &amp;errorCode);</div>
<div class="line">    <span class="keywordflow">if</span> (!bit) {</div>
<div class="line">        <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;get max QuickStopDeceleration&quot;</span>, error, bit, errorCode);</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        parameter-&gt;quickstopDeceleration = ((double) value) * <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab7dfe30a4a13813163437d4d54fa053d" title="[m] the Perimeter of one wheel">wheelPerimeter</a> / (60 * <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#adf387ce695bf432caace5e216dda3429" title="[-] the Ratio of the Gear between Motor and wheel">gearRatio</a>);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac6c31e0dc57485aa817431b22627fc70"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060c">Epos2MotorController::EposState</a> Epos2MotorController::getEpos2State </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>read out the state of the EPOS2 state machine </p>
<dl class="section return"><dt>Returns</dt><dd>internal state in the Epos2MotorControllerClass </dd></dl>

<p>Definition at line <a class="el" href="Epos2MotorController_8cpp_source.html#l00320">320</a> of file <a class="el" href="Epos2MotorController_8cpp_source.html">Epos2MotorController.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> bit=0;</div>
<div class="line">    <a class="code" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060c" title="internal state of the MotorController-Object with respect to the state of the EPOS2">EposState</a> temp = <a class="code" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060cad38c41836bbe157863e3eae0d308b7ca" title="couldn&#39;t read state.">unknown</a>;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> errorCode=0;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> tempState=0;</div>
<div class="line"></div>
<div class="line">    bit=VCS_GetState(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, &amp;tempState, &amp;errorCode);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (!bit) {</div>
<div class="line">        <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;read State of Node&quot;</span>, error, 0, errorCode);</div>
<div class="line">        <span class="keywordflow">return</span> <a class="code" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060cad38c41836bbe157863e3eae0d308b7ca" title="couldn&#39;t read state.">unknown</a>;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">switch</span> (tempState) {</div>
<div class="line">            <span class="keywordflow">case</span> ST_ENABLED:    temp = <a class="code" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060cae6493e2426163b114bea951ab9a419d5" title="EPOS2 is ready for driving.">enabled</a>;</div>
<div class="line">                                <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;getState: enabled&quot;</span>, debug);</div>
<div class="line">                                <span class="keywordflow">break</span>;</div>
<div class="line">            <span class="keywordflow">case</span> ST_DISABLED:   temp = <a class="code" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060caf0eea74682d3d3f21bec6e5b376cf443" title="EPOS2 is started but not ready for driving.">disabled</a>;</div>
<div class="line">                                <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;getState: disabled&quot;</span>, debug);</div>
<div class="line">                                <span class="keywordflow">break</span>;</div>
<div class="line">            <span class="keywordflow">case</span> ST_QUICKSTOP:  temp = <a class="code" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060caa83d02e81212676710b3c6d97cb30119" title="Safety brake.">quickstop</a>;</div>
<div class="line">                                <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;getState: quickstop&quot;</span>, debug);</div>
<div class="line">                                <span class="keywordflow">break</span>;</div>
<div class="line">            <span class="keywordflow">case</span> ST_FAULT:      temp = <a class="code" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060ca9c2b33ebbe5a72ad6d09d6af6531237c" title="no movement is possible.">fault</a>;</div>
<div class="line">                                <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;getState: fault&quot;</span>, debug);</div>
<div class="line">                                <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> temp;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a43b5c84e3d2c891a98fae2c159d0a112"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Epos2MotorController::getGearData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structEpos2MotorController_1_1gearData.html">gearData</a> *&#160;</td>
          <td class="paramname"><em>parameter</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>read out all Data of the gear from the EPOS2 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*parameter</td><td>structure for all relevant gear data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if successful otherwise 0 </dd></dl>

<p>Definition at line <a class="el" href="Epos2MotorController_8cpp_source.html#l00397">397</a> of file <a class="el" href="Epos2MotorController_8cpp_source.html">Epos2MotorController.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> bit=0;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> errorCode=0, bytesRead=0;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> value;</div>
<div class="line"></div>
<div class="line">    <span class="comment">//init</span></div>
<div class="line">    parameter-&gt;denominator = <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#af648530b886ebd8176997645c99aa35b" title="[-] the denominator from the ratio of the gear">gearDenomiantor</a>;</div>
<div class="line">    parameter-&gt;numerator = <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#a1524dd1ea0ca97addfa48ec2ba983c3e" title="[-] the numerator from the Ratio of the gear">gearNumerator</a>;</div>
<div class="line">    parameter-&gt;maxRPM = 1;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="classEpos2MotorController.html#a7194b8efd4f2fd5a4d64b10135c416e2" title="the state inside this class depending on the state of the EPOS2">state</a> = <a class="code" href="classEpos2MotorController.html#ac6c31e0dc57485aa817431b22627fc70" title="read out the state of the EPOS2 state machine">getEpos2State</a>();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="classEpos2MotorController.html#a7194b8efd4f2fd5a4d64b10135c416e2" title="the state inside this class depending on the state of the EPOS2">state</a> &lt;= <a class="code" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060ca9c2b33ebbe5a72ad6d09d6af6531237c" title="no movement is possible.">fault</a>) {</div>
<div class="line"></div>
<div class="line">        <span class="comment">/*bit = VCS_GetObject(devhandle, epos2MotorSet.node, 0x2230, 0x01, &amp;(parameter-&gt;numerator), 4, &amp;bytesRead, &amp;errorCode);</span></div>
<div class="line"><span class="comment">        if (!bit) { errorOutput(&quot;couldn&#39;t read Gear-Numerator&quot;, error, bit, errorCode);}</span></div>
<div class="line"><span class="comment"></span></div>
<div class="line"><span class="comment">        bit = VCS_GetObject(devhandle, epos2MotorSet.node, 0x2230, 0x02, &amp;(parameter-&gt;denominator), 2, &amp;bytesRead, &amp;errorCode);</span></div>
<div class="line"><span class="comment">        if (!bit) { errorOutput(&quot;couldn&#39;t read Gear-Denominator&quot;, error, bit, errorCode);}*/</span></div>
<div class="line"></div>
<div class="line">        bit = VCS_GetObject(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, 0x2230, 0x03, &amp;value, 4, &amp;bytesRead, &amp;errorCode);</div>
<div class="line">        <span class="keywordflow">if</span> (!bit) { <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;couldn&#39;t read max RPM of Gear&quot;</span>, error, bit, errorCode);}</div>
<div class="line"></div>
<div class="line">        parameter-&gt;maxRPM = (double)value;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae363c85bc1e9dbad81fd49b06d783ff9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Epos2MotorController::getMaxRPM </td>
          <td>(</td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>maxRPM</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>read out the currently set highest allowed angular velocity from the EPOS2. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*maxRPM</td><td>current highest allowed angular velocity </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if successful otherwise 0 </dd></dl>

<p>Definition at line <a class="el" href="Epos2MotorController_8cpp_source.html#l00605">605</a> of file <a class="el" href="Epos2MotorController_8cpp_source.html">Epos2MotorController.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> bit=0;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> errorCode=0, bytesRead=0;</div>
<div class="line">    <span class="keywordtype">long</span> <span class="keywordtype">int</span> value;</div>
<div class="line"></div>
<div class="line">    *maxRPM = 0;</div>
<div class="line">    <a class="code" href="classEpos2MotorController.html#a7194b8efd4f2fd5a4d64b10135c416e2" title="the state inside this class depending on the state of the EPOS2">state</a> = <a class="code" href="classEpos2MotorController.html#ac6c31e0dc57485aa817431b22627fc70" title="read out the state of the EPOS2 state machine">getEpos2State</a>();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="classEpos2MotorController.html#a7194b8efd4f2fd5a4d64b10135c416e2" title="the state inside this class depending on the state of the EPOS2">state</a> &lt;= <a class="code" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060ca9c2b33ebbe5a72ad6d09d6af6531237c" title="no movement is possible.">fault</a>) {</div>
<div class="line"></div>
<div class="line">        bit = VCS_GetObject(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, 0x607f, 0x00, &amp;value, 4, &amp;bytesRead, &amp;errorCode);</div>
<div class="line">        <span class="keywordflow">if</span> (!bit) {</div>
<div class="line">            <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;couldn&#39;t read max RPM of wheels&quot;</span>, error, bit, errorCode);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        *maxRPM = (double)value * 0.001 / <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#adf387ce695bf432caace5e216dda3429" title="[-] the Ratio of the Gear between Motor and wheel">gearRatio</a>;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0b70bbbfed4fa0c78a9f15dfb593bb9f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Epos2MotorController::getMotorData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structEpos2MotorController_1_1motorData.html">motorData</a> *&#160;</td>
          <td class="paramname"><em>parameter</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>read out all Data of the motor from the EPOS2 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*parameter</td><td>structure for all relevant motor data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if successful otherwise 0 </dd></dl>

<p>Definition at line <a class="el" href="Epos2MotorController_8cpp_source.html#l00464">464</a> of file <a class="el" href="Epos2MotorController_8cpp_source.html">Epos2MotorController.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> bit=0;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bytesRead=0;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> errorCode=0;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> value;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="classEpos2MotorController.html#a7194b8efd4f2fd5a4d64b10135c416e2" title="the state inside this class depending on the state of the EPOS2">state</a> = <a class="code" href="classEpos2MotorController.html#ac6c31e0dc57485aa817431b22627fc70" title="read out the state of the EPOS2 state machine">getEpos2State</a>();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="classEpos2MotorController.html#a7194b8efd4f2fd5a4d64b10135c416e2" title="the state inside this class depending on the state of the EPOS2">state</a> &lt;= <a class="code" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060ca9c2b33ebbe5a72ad6d09d6af6531237c" title="no movement is possible.">fault</a>) {</div>
<div class="line"></div>
<div class="line">        bit = VCS_GetDcMotorParameter(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, &amp;(parameter-&gt;continuousCurrent), &amp;(parameter-&gt;maxPeakCurrent), &amp;(parameter-&gt;thermalTimeConstantWinding), &amp;errorCode);</div>
<div class="line">        <span class="keywordflow">if</span> (bit != 0) {</div>
<div class="line">            ROS_DEBUG(<span class="stringliteral">&quot;MotorData %s: NominalCurrent - %i, PeakCurrent - %i, ThermalTimeConstant - %i&quot;</span>, <a class="code" href="classEpos2MotorController.html#aec7abbd4cd8e70e98f28cae457275e31" title="this appears in front of a message published with ROS.">nodeStr</a>, parameter-&gt;continuousCurrent, parameter-&gt;maxPeakCurrent, parameter-&gt;thermalTimeConstantWinding);</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;couldn&#39;t read DC-Motor parameter&quot;</span>, warn, bit, errorCode);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        bit = VCS_GetObject(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, 0x6410, 0x04, &amp;value, 4, &amp;bytesRead, &amp;errorCode);</div>
<div class="line">        <span class="keywordflow">if</span> (bit != 0) {</div>
<div class="line">            ROS_DEBUG(<span class="stringliteral">&quot;Maximum Velocity is %s: %li rpm&quot;</span>, <a class="code" href="classEpos2MotorController.html#aec7abbd4cd8e70e98f28cae457275e31" title="this appears in front of a message published with ROS.">nodeStr</a>, parameter-&gt;maxRPM);</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;couldn&#39;t read maximum RPM of Motor&quot;</span>, warn, bit, errorCode);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        parameter-&gt;maxRPM = (double) value;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a84b2544d4e3facf75ae12a526da2735d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Epos2MotorController::getRegulatorParameter </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structEpos2MotorController_1_1regulator.html">regulator</a> *&#160;</td>
          <td class="paramname"><em>parameter</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>read out all parameter of the regulators from the EPOS2 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*parameter</td><td>structure for all regulator gain and feedforward values </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if successful otherwise 0 </dd></dl>

<p>Definition at line <a class="el" href="Epos2MotorController_8cpp_source.html#l00629">629</a> of file <a class="el" href="Epos2MotorController_8cpp_source.html">Epos2MotorController.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> bit=0, bit1=0;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> errorCode=0, bytesRead=0;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="classEpos2MotorController.html#a7194b8efd4f2fd5a4d64b10135c416e2" title="the state inside this class depending on the state of the EPOS2">state</a> = <a class="code" href="classEpos2MotorController.html#ac6c31e0dc57485aa817431b22627fc70" title="read out the state of the EPOS2 state machine">getEpos2State</a>();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="classEpos2MotorController.html#a7194b8efd4f2fd5a4d64b10135c416e2" title="the state inside this class depending on the state of the EPOS2">state</a> &lt;= <a class="code" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060ca9c2b33ebbe5a72ad6d09d6af6531237c" title="no movement is possible.">fault</a>) {</div>
<div class="line"></div>
<div class="line">        bit = VCS_GetPositionRegulatorGain(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, &amp;(*parameter).positionGain.p, &amp;(*parameter).positionGain.i, &amp;(*parameter).positionGain.d, &amp;errorCode);</div>
<div class="line">        <span class="keywordflow">if</span> (bit != 0) {</div>
<div class="line">            ROS_DEBUG(<span class="stringliteral">&quot;PositionGain read %s: P - %i, I - %i, D - %i&quot;</span>, <a class="code" href="classEpos2MotorController.html#aec7abbd4cd8e70e98f28cae457275e31" title="this appears in front of a message published with ROS.">nodeStr</a>, (*parameter).positionGain.p, (*parameter).positionGain.i, (*parameter).positionGain.d);</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;couldn&#39;t read Position Gain Values&quot;</span>, warn,  bit, errorCode);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        bit = VCS_GetPositionRegulatorFeedForward(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, &amp;(*parameter).positionFF.Velocity, &amp;(*parameter).positionFF.Acceleration, &amp;errorCode);</div>
<div class="line">        <span class="keywordflow">if</span> (bit != 0) {</div>
<div class="line">            ROS_DEBUG(<span class="stringliteral">&quot;PositionFeedForward read %s: Velocity - %i, Acceleration - %i&quot;</span>, <a class="code" href="classEpos2MotorController.html#aec7abbd4cd8e70e98f28cae457275e31" title="this appears in front of a message published with ROS.">nodeStr</a>, (*parameter).positionFF.Velocity, (*parameter).positionFF.Acceleration);</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;couldn&#39;t read Position FeedForward Values&quot;</span>, warn,  bit, errorCode);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        bit = VCS_GetVelocityRegulatorGain(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, &amp;(*parameter).velocityGain.p, &amp;(*parameter).velocityGain.i, &amp;errorCode);</div>
<div class="line">        <span class="keywordflow">if</span> (bit != 0) {</div>
<div class="line">            ROS_DEBUG(<span class="stringliteral">&quot;VelocityGain read %s: P - %i, I - %i&quot;</span>, <a class="code" href="classEpos2MotorController.html#aec7abbd4cd8e70e98f28cae457275e31" title="this appears in front of a message published with ROS.">nodeStr</a>, (*parameter).velocityGain.p, (*parameter).velocityGain.i);</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;couldn&#39;t read Velocity Gain Values&quot;</span>, warn, bit, errorCode);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        bit  = VCS_GetObject(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, 0x60f9, 0x04, (<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *) &amp;(*parameter).velocityFF.Velocity, 2, &amp;bytesRead, &amp;errorCode);</div>
<div class="line">        bit1 = VCS_GetObject(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, 0x60f9, 0x05, (<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *) &amp;(*parameter).velocityFF.Acceleration, 2, &amp;bytesRead, &amp;errorCode);</div>
<div class="line">        <span class="keywordflow">if</span> (bit != 0 &amp;&amp; bit1 !=0) {</div>
<div class="line">            ROS_DEBUG(<span class="stringliteral">&quot;VelocityFeedForward read %s: Velocity - %i, Acceleration - %i&quot;</span>, <a class="code" href="classEpos2MotorController.html#aec7abbd4cd8e70e98f28cae457275e31" title="this appears in front of a message published with ROS.">nodeStr</a>, (*parameter).velocityFF.Velocity, (*parameter).velocityFF.Acceleration);</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;couldn&#39;t read Velocity FeedForward Values&quot;</span>, warn, bit, errorCode);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        bit = VCS_GetCurrentRegulatorGain(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, &amp;(*parameter).currentGain.p, &amp;(*parameter).currentGain.i, &amp;errorCode);</div>
<div class="line">        <span class="keywordflow">if</span> (bit != 0) {</div>
<div class="line">            ROS_DEBUG(<span class="stringliteral">&quot;CurrentGain read %s: P - %i, I - %i&quot;</span>, <a class="code" href="classEpos2MotorController.html#aec7abbd4cd8e70e98f28cae457275e31" title="this appears in front of a message published with ROS.">nodeStr</a>, (*parameter).currentGain.p, (*parameter).currentGain.i);</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;couldn&#39;t read Current Gain Values&quot;</span>, warn, bit, errorCode);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0c2778ab028417b907d7a55297ccbd4a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Epos2MotorController::init </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>maxRPM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>wheelPerimeter</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>calls a few set-functions, store the settings in the EPOS2 and enable the Device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">maxRPM</td><td>[rev/min] highest allowed angular velocity for this EPOS2 </td></tr>
    <tr><td class="paramname">wheelPerimeter</td><td>[m] Perimeter of one wheel connected to this EPOS2</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="classEpos2MotorController.html#a2ff727bd7ad81302c2feaaf297d888ae" title="set the positive direction of movement into the EPOS2.">setSpin()</a> </dd>
<dd>
<a class="el" href="classEpos2MotorController.html#a8eb9d184e96079a5a995776cf3a453f2" title="set how the numbers sending to the EPOS2 will be interpreted.">setDimensionAndNotation()</a> </dd>
<dd>
<a class="el" href="classEpos2MotorController.html#a0a5257b20692de37091544e6ed5f6aed" title="set all Data of the motor into the EPOS2.">setMotorData()</a> </dd>
<dd>
<a class="el" href="classEpos2MotorController.html#a6c806fba7028bed11d710c4f453869b1" title="set all Data of the gear into the EPOS2.">setGearData()</a> </dd>
<dd>
<a class="el" href="classEpos2MotorController.html#aada27a05c4f5150f7b2d2b3ec20a8f84" title="set all Data restricting the acceleration into the EPOS2.">setAccelerationData()</a> </dd>
<dd>
<a class="el" href="classEpos2MotorController.html#a60d132d6d79c0b8d49eb5ed721aae790" title="set the highest allowed angular velocity into the EPOS2.">setMaxRPM()</a> </dd>
<dd>
<a class="el" href="classEpos2MotorController.html#a2e1ad71a3be2943ed7bffd743c4f1fad" title="stores all changed Settings in the EPOS2.">storeSettings()</a> </dd></dl>

<p>Definition at line <a class="el" href="Epos2MotorController_8cpp_source.html#l00835">835</a> of file <a class="el" href="Epos2MotorController_8cpp_source.html">Epos2MotorController.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> ( <a class="code" href="classEpos2MotorController.html#ad58ad9fe38c72ce0d457a286973f8a99" title="set the EPOS2 into disable state">disableEpos2</a>() ) {</div>
<div class="line">        <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab7dfe30a4a13813163437d4d54fa053d" title="[m] the Perimeter of one wheel">wheelPerimeter</a> = wheelPerimeter;</div>
<div class="line"></div>
<div class="line">        <a class="code" href="classEpos2MotorController.html#a2ff727bd7ad81302c2feaaf297d888ae" title="set the positive direction of movement into the EPOS2.">setSpin</a>(<a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#af14c93f519f8ecee21ab4eddfb2a2230" title="defines the positive direction of the rotation">reverse</a>);</div>
<div class="line">        <a class="code" href="classEpos2MotorController.html#a8eb9d184e96079a5a995776cf3a453f2" title="set how the numbers sending to the EPOS2 will be interpreted.">setDimensionAndNotation</a>();</div>
<div class="line"></div>
<div class="line">        gearData gearTemp = {7000, 147, 2};</div>
<div class="line">        <a class="code" href="classEpos2MotorController.html#a6c806fba7028bed11d710c4f453869b1" title="set all Data of the gear into the EPOS2.">setGearData</a>(&amp;gearTemp);</div>
<div class="line">        motorData motorTemp = {5770, 12000, 10, 7000};</div>
<div class="line">        <a class="code" href="classEpos2MotorController.html#a0a5257b20692de37091544e6ed5f6aed" title="set all Data of the motor into the EPOS2.">setMotorData</a>(&amp;motorTemp);</div>
<div class="line">        accelerationData accTemp = {2.0, 2.0, 3.5, 3.52};</div>
<div class="line">        <a class="code" href="classEpos2MotorController.html#aada27a05c4f5150f7b2d2b3ec20a8f84" title="set all Data restricting the acceleration into the EPOS2.">setAccelerationData</a>(&amp;accTemp);</div>
<div class="line">        <a class="code" href="classEpos2MotorController.html#a60d132d6d79c0b8d49eb5ed721aae790" title="set the highest allowed angular velocity into the EPOS2.">setMaxRPM</a>(maxRPM);</div>
<div class="line"></div>
<div class="line">        <a class="code" href="classEpos2MotorController.html#a2e1ad71a3be2943ed7bffd743c4f1fad" title="stores all changed Settings in the EPOS2.">storeSettings</a>();</div>
<div class="line"></div>
<div class="line">        <a class="code" href="classEpos2MotorController.html#aeadc7a21fa6619a4104887f169b9d2fd" title="set the EPOS2 into enable state">enableEpos2</a>();</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;can&#39;t initialize device because it&#39;s not in disable state&quot;</span>, error);</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6a3f76a6ed867ed6847d9ebac01136ea"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int Epos2MotorController::initCommunication </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>baudrate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>build up the communication to a plugged EPOS2. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>the name of the port you want to connect to (USB0, USB1, ... or /dev/ttyS0, /dev/ttyS1, ...) </td></tr>
    <tr><td class="paramname">baudrate</td><td>[bit/s] the frequency for the communication. If it's not set or zero, it will be set to 1000000 (USB) or 115200 (RS232 - Serial) </td></tr>
    <tr><td class="paramname">timeout</td><td>[ms] If there is no response from the EPOS2 within this time, you will get a communication error. If it's zero or not set, a value of 750 will be used.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if successful otherwise 0 </dd></dl>

<p>Definition at line <a class="el" href="Epos2MotorController_8cpp_source.html#l00859">859</a> of file <a class="el" href="Epos2MotorController_8cpp_source.html">Epos2MotorController.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> bit=0;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> errorCode=0;</div>
<div class="line"></div>
<div class="line">    <span class="comment">//ROS_ERROR(&quot;port: %s, %i&quot;, port.c_str(), port.substr(0,3).compare(&quot;USB&quot;));</span></div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> ( port.substr(0,3).compare(<span class="stringliteral">&quot;USB&quot;</span>) == 0 ) {</div>
<div class="line">        <span class="keywordflow">if</span> (baudrate == 0) {baudrate = 1000000;}</div>
<div class="line">        <span class="keywordflow">if</span> (timeout == 0) {timeout = 750;}</div>
<div class="line">        <a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a> = VCS_OpenDevice((<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;EPOS2&quot;</span>, (<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;MAXON SERIAL V2&quot;</span>, (<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;USB&quot;</span>, (<span class="keywordtype">char</span>*) port.c_str(), &amp;errorCode);</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( port.substr(0,8).compare(<span class="stringliteral">&quot;/dev/tty&quot;</span>) == 0 ) {</div>
<div class="line">        <span class="keywordflow">if</span> (baudrate == 0) {baudrate = 115200;}</div>
<div class="line">        <span class="keywordflow">if</span> (timeout == 0) {timeout = 750;}</div>
<div class="line">        <a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a> = VCS_OpenDevice((<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;EPOS2&quot;</span>, (<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;MAXON_RS232&quot;</span>, (<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;RS232&quot;</span>, (<span class="keywordtype">char</span>*) port.c_str(), &amp;errorCode);</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a> = 0;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    this-&gt;<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>=<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="classEpos2MotorController.html#aec7abbd4cd8e70e98f28cae457275e31" title="this appears in front of a message published with ROS.">nodeStr</a>=(<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;EPOS2&quot;</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>==0) {</div>
<div class="line">        <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;can&#39;t get devhandle - please check the port settings (mostly in the parameter server)&quot;</span>, fatal, 0, 0x10000003);</div>
<div class="line">        <span class="comment">//errorOutput(&quot;open Device&quot;, fatal, (int) devhandle, errorCode);</span></div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;open Device successfully&quot;</span>, info, (<span class="keywordtype">int</span>) <a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, errorCode);</div>
<div class="line"></div>
<div class="line">        <span class="comment">//set communication parameter</span></div>
<div class="line">        bit = VCS_SetProtocolStackSettings(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, baudrate, timeout, &amp;errorCode);</div>
<div class="line">        <span class="keywordflow">if</span> (!bit) {</div>
<div class="line">            <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;can&#39;t set ProtocollStackSettings&quot;</span>, fatal, bit, errorCode);</div>
<div class="line">            this-&gt;<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a> = 0;</div>
<div class="line">            <span class="keywordflow">return</span> 0;</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;set ProtocollStackSettings successfully&quot;</span>, debug);</div>
<div class="line">            <span class="keywordflow">return</span> 1;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a257e06f445d5ecc34f1dbae30e63fc9f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Epos2MotorController::resetDevice </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset the State Machine inside the EPOS2. </p>
<dl class="section return"><dt>Returns</dt><dd>1 if successful otherwise 0 </dd></dl>

<p>Definition at line <a class="el" href="Epos2MotorController_8cpp_source.html#l00078">78</a> of file <a class="el" href="Epos2MotorController_8cpp_source.html">Epos2MotorController.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> bit=0;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> errorCode=0;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="classEpos2MotorController.html#a7194b8efd4f2fd5a4d64b10135c416e2" title="the state inside this class depending on the state of the EPOS2">state</a> = <a class="code" href="classEpos2MotorController.html#ac6c31e0dc57485aa817431b22627fc70" title="read out the state of the EPOS2 state machine">getEpos2State</a>();</div>
<div class="line"></div>
<div class="line">    (<a class="code" href="classEpos2MotorController.html#a7194b8efd4f2fd5a4d64b10135c416e2" title="the state inside this class depending on the state of the EPOS2">state</a> &lt;= <a class="code" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060ca9c2b33ebbe5a72ad6d09d6af6531237c" title="no movement is possible.">fault</a>) ? bit = VCS_ResetDevice(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, &amp;errorCode) : bit = 0;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (!bit) {</div>
<div class="line">        <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;reset device&quot;</span>, error, bit, errorCode);</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <a class="code" href="classEpos2MotorController.html#a7194b8efd4f2fd5a4d64b10135c416e2" title="the state inside this class depending on the state of the EPOS2">state</a> = <a class="code" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060cae80551bbe5d91631014d56926de2d402" title="before deleting Faults you had to reset all EPOS2.">reset</a>;</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aada27a05c4f5150f7b2d2b3ec20a8f84"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Epos2MotorController::setAccelerationData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structEpos2MotorController_1_1accelerationData.html">accelerationData</a> *&#160;</td>
          <td class="paramname"><em>parameter</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>set all Data restricting the acceleration into the EPOS2. </p>
<p>changes are only allowed in disabled state.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*parameter</td><td>structure with all relevant acceleration data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if successful otherwise 0 </dd></dl>

<p>Definition at line <a class="el" href="Epos2MotorController_8cpp_source.html#l00497">497</a> of file <a class="el" href="Epos2MotorController_8cpp_source.html">Epos2MotorController.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> bit = 0, notNegativ = 0;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> errorCode, bytesWritten;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> value, value2;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="classEpos2MotorController.html#a8fc2ecc7f9b6398382a96c760dace71a" title="checks if a given number is positive and nonzero.">errorIfNotBiggerZero</a>(parameter-&gt;quickstopDeceleration, <span class="stringliteral">&quot;quickstopDeceleration&quot;</span>) &amp;&amp; <a class="code" href="classEpos2MotorController.html#a8fc2ecc7f9b6398382a96c760dace71a" title="checks if a given number is positive and nonzero.">errorIfNotBiggerZero</a>(parameter-&gt;profileAcceleration, <span class="stringliteral">&quot;profileAcceleration&quot;</span>)) {</div>
<div class="line">        notNegativ = 1;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="classEpos2MotorController.html#a8fc2ecc7f9b6398382a96c760dace71a" title="checks if a given number is positive and nonzero.">errorIfNotBiggerZero</a>(parameter-&gt;profileDeceleration, <span class="stringliteral">&quot;profileDeceleration&quot;</span>) &amp;&amp; <a class="code" href="classEpos2MotorController.html#a8fc2ecc7f9b6398382a96c760dace71a" title="checks if a given number is positive and nonzero.">errorIfNotBiggerZero</a>(parameter-&gt;maxAcceleration, <span class="stringliteral">&quot;maxAcceleration&quot;</span>) &amp;&amp; notNegativ) {</div>
<div class="line">        notNegativ = 1;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        notNegativ = 0;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (notNegativ == 1) {</div>
<div class="line">        <span class="comment">//setting-functions-units are [rev/(min * s)] and input-units are [m/(s^2)]</span></div>
<div class="line"></div>
<div class="line">        value = (<span class="keywordtype">unsigned</span> int) (parameter-&gt;maxAcceleration * 60 * <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#adf387ce695bf432caace5e216dda3429" title="[-] the Ratio of the Gear between Motor and wheel">gearRatio</a> / <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab7dfe30a4a13813163437d4d54fa053d" title="[m] the Perimeter of one wheel">wheelPerimeter</a>);</div>
<div class="line">        bit = VCS_SetObject(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, 0x60c5, 0x00, &amp;value, 2, &amp;bytesWritten, &amp;errorCode);</div>
<div class="line">        <span class="keywordflow">if</span> (!bit) {</div>
<div class="line">            <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;set max Acceleration&quot;</span>, error, bit, errorCode);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        value = (<span class="keywordtype">unsigned</span> int) (parameter-&gt;profileAcceleration * 60 * <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#adf387ce695bf432caace5e216dda3429" title="[-] the Ratio of the Gear between Motor and wheel">gearRatio</a> / <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab7dfe30a4a13813163437d4d54fa053d" title="[m] the Perimeter of one wheel">wheelPerimeter</a>);</div>
<div class="line">        value2 = (<span class="keywordtype">unsigned</span> int) (parameter-&gt;profileDeceleration * 60 * <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#adf387ce695bf432caace5e216dda3429" title="[-] the Ratio of the Gear between Motor and wheel">gearRatio</a> / <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab7dfe30a4a13813163437d4d54fa053d" title="[m] the Perimeter of one wheel">wheelPerimeter</a>);</div>
<div class="line">        bit = VCS_SetVelocityProfile(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, value, value2, &amp;errorCode);</div>
<div class="line">        <span class="keywordflow">if</span> (!bit) {</div>
<div class="line">            <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;set velocity profile acceleration and deceleration&quot;</span>, error, bit, errorCode);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        value = (<span class="keywordtype">unsigned</span> int) (parameter-&gt;quickstopDeceleration * 60 * <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#adf387ce695bf432caace5e216dda3429" title="[-] the Ratio of the Gear between Motor and wheel">gearRatio</a> / <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab7dfe30a4a13813163437d4d54fa053d" title="[m] the Perimeter of one wheel">wheelPerimeter</a>);</div>
<div class="line">        bit = VCS_SetObject(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, 0x6085, 0x00, &amp;value, 2, &amp;bytesWritten, &amp;errorCode);</div>
<div class="line">        <span class="keywordflow">if</span> (!bit) {</div>
<div class="line">            <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;set max QuickStopDeceleration&quot;</span>, error, bit, errorCode);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;No Acceleration Values will be set because at least one parameter is not valid.&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8eb9d184e96079a5a995776cf3a453f2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int Epos2MotorController::setDimensionAndNotation </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>set how the numbers sending to the EPOS2 will be interpreted. </p>
<p>it's set for position/way, velocity and acceleration. The velocity Notation index is set to e-3 because the velocity will be set as integers it increases the accuracy. changes are only allowed in disabled state.</p>
<dl class="section return"><dt>Returns</dt><dd>1 if successful otherwise 0 </dd></dl>

<p>Definition at line <a class="el" href="Epos2MotorController_8cpp_source.html#l00758">758</a> of file <a class="el" href="Epos2MotorController_8cpp_source.html">Epos2MotorController.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> bit=0;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> errorCode=0, bytesWritten=0;</div>
<div class="line">    <span class="keywordtype">short</span> signValue = 0;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> unsignValue = 0;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="classEpos2MotorController.html#a7194b8efd4f2fd5a4d64b10135c416e2" title="the state inside this class depending on the state of the EPOS2">state</a> = <a class="code" href="classEpos2MotorController.html#ac6c31e0dc57485aa817431b22627fc70" title="read out the state of the EPOS2 state machine">getEpos2State</a>();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="classEpos2MotorController.html#a7194b8efd4f2fd5a4d64b10135c416e2" title="the state inside this class depending on the state of the EPOS2">state</a> == <a class="code" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060caf0eea74682d3d3f21bec6e5b376cf443" title="EPOS2 is started but not ready for driving.">disabled</a>) {</div>
<div class="line"></div>
<div class="line">        unsignValue = 0xac;</div>
<div class="line">        bit = VCS_SetObject(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, 0x608a, 0x00, &amp;unsignValue, 1, &amp;bytesWritten, &amp;errorCode);</div>
<div class="line">        <span class="keywordflow">if</span> (!bit) { <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;set Position Dimension Index&quot;</span>, error, bit, errorCode);}</div>
<div class="line"></div>
<div class="line">        unsignValue = 0xa4;</div>
<div class="line">        bit = VCS_SetObject(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, 0x608c, 0x00, &amp;unsignValue, 2, &amp;bytesWritten, &amp;errorCode);</div>
<div class="line">        <span class="keywordflow">if</span> (!bit) { <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;set Velocity Dimension Index&quot;</span>, error, bit, errorCode);}</div>
<div class="line"></div>
<div class="line">        <span class="comment">//unsignValue = 0xa4;</span></div>
<div class="line">        bit = VCS_SetObject(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, 0x608e, 0x00, &amp;unsignValue, 1, &amp;bytesWritten, &amp;errorCode);</div>
<div class="line">        <span class="keywordflow">if</span> (!bit) { <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;set Acceleration Dimension Index&quot;</span>, error, bit, errorCode);}</div>
<div class="line"></div>
<div class="line">        signValue = 0x0;</div>
<div class="line">        bit = VCS_SetObject(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, 0x6089, 0x00, &amp;signValue, 1, &amp;bytesWritten, &amp;errorCode);</div>
<div class="line">        <span class="keywordflow">if</span> (!bit) { <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;set Position Notation Index&quot;</span>, error, bit, errorCode);}</div>
<div class="line"></div>
<div class="line">        signValue = 0xfd;</div>
<div class="line">        bit = VCS_SetObject(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, 0x608b, 0x00, &amp;signValue, 1, &amp;bytesWritten, &amp;errorCode);</div>
<div class="line">        <span class="keywordflow">if</span> (!bit) { <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;set Velocity Notation Index&quot;</span>, error, bit, errorCode);}</div>
<div class="line"></div>
<div class="line">        signValue = 0x0;</div>
<div class="line">        bit = VCS_SetObject(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, 0x608d, 0x00, &amp;signValue, 1, &amp;bytesWritten, &amp;errorCode);</div>
<div class="line">        <span class="keywordflow">if</span> (!bit) { <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;set Acceleration Notation Index&quot;</span>, error, bit, errorCode);}</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6c806fba7028bed11d710c4f453869b1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Epos2MotorController::setGearData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structEpos2MotorController_1_1gearData.html">gearData</a> *&#160;</td>
          <td class="paramname"><em>parameter</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>set all Data of the gear into the EPOS2. </p>
<p>changes are only allowed in disabled state.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*parameter</td><td>structure with all relevant gear data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if successful otherwise 0 </dd></dl>

<p>Definition at line <a class="el" href="Epos2MotorController_8cpp_source.html#l00367">367</a> of file <a class="el" href="Epos2MotorController_8cpp_source.html">Epos2MotorController.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> bit=0;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> errorCode=0, bytesWritten=0;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> value = 1;    <span class="comment">//gearRatio in EPOS2 will set to because only the velocity limitation work but the target velocity will be set before (motor side) instead after the gear (wheel side)</span></div>
<div class="line"></div>
<div class="line">    <a class="code" href="classEpos2MotorController.html#a7194b8efd4f2fd5a4d64b10135c416e2" title="the state inside this class depending on the state of the EPOS2">state</a> = <a class="code" href="classEpos2MotorController.html#ac6c31e0dc57485aa817431b22627fc70" title="read out the state of the EPOS2 state machine">getEpos2State</a>();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="classEpos2MotorController.html#a7194b8efd4f2fd5a4d64b10135c416e2" title="the state inside this class depending on the state of the EPOS2">state</a> == <a class="code" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060caf0eea74682d3d3f21bec6e5b376cf443" title="EPOS2 is started but not ready for driving.">disabled</a>) {</div>
<div class="line"></div>
<div class="line">        bit = VCS_SetObject(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, 0x2230, 0x01, &amp;value, 4, &amp;bytesWritten, &amp;errorCode);</div>
<div class="line">        <span class="keywordflow">if</span> (!bit) { <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;set Gear-Numerator&quot;</span>, error, bit, errorCode);}</div>
<div class="line"></div>
<div class="line">        bit = VCS_SetObject(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, 0x2230, 0x02, &amp;value, 2, &amp;bytesWritten, &amp;errorCode);</div>
<div class="line">        <span class="keywordflow">if</span> (!bit) { <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;set Gear-Denominator&quot;</span>, error, bit, errorCode);}</div>
<div class="line"></div>
<div class="line">        value = abs(parameter-&gt;maxRPM);</div>
<div class="line">        bit = VCS_SetObject(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, 0x2230, 0x03, &amp;value, 4, &amp;bytesWritten, &amp;errorCode);</div>
<div class="line">        <span class="keywordflow">if</span> (!bit) { <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;set max RPM of Gear&quot;</span>, error, bit, errorCode);}</div>
<div class="line"></div>
<div class="line">        <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#a1524dd1ea0ca97addfa48ec2ba983c3e" title="[-] the numerator from the Ratio of the gear">gearNumerator</a> = parameter-&gt;numerator;</div>
<div class="line">        <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#af648530b886ebd8176997645c99aa35b" title="[-] the denominator from the ratio of the gear">gearDenomiantor</a> = parameter-&gt;denominator;</div>
<div class="line">        <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#adf387ce695bf432caace5e216dda3429" title="[-] the Ratio of the Gear between Motor and wheel">gearRatio</a> = <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#a1524dd1ea0ca97addfa48ec2ba983c3e" title="[-] the numerator from the Ratio of the gear">gearNumerator</a> / <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#af648530b886ebd8176997645c99aa35b" title="[-] the denominator from the ratio of the gear">gearDenomiantor</a>;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a60d132d6d79c0b8d49eb5ed721aae790"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Epos2MotorController::setMaxRPM </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>maxRPM</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>set the highest allowed angular velocity into the EPOS2. </p>
<p>changes are only allowed in disabled state.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">maxRPM</td><td>highest allowed angular velocity </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if successful otherwise 0 </dd></dl>

<p>Definition at line <a class="el" href="Epos2MotorController_8cpp_source.html#l00580">580</a> of file <a class="el" href="Epos2MotorController_8cpp_source.html">Epos2MotorController.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> bit=0;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> errorCode=0, bytesWritten=0;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> value = abs(maxRPM*1000*<a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#adf387ce695bf432caace5e216dda3429" title="[-] the Ratio of the Gear between Motor and wheel">gearRatio</a>);</div>
<div class="line"></div>
<div class="line">    <a class="code" href="classEpos2MotorController.html#a7194b8efd4f2fd5a4d64b10135c416e2" title="the state inside this class depending on the state of the EPOS2">state</a> = <a class="code" href="classEpos2MotorController.html#ac6c31e0dc57485aa817431b22627fc70" title="read out the state of the EPOS2 state machine">getEpos2State</a>();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="classEpos2MotorController.html#a7194b8efd4f2fd5a4d64b10135c416e2" title="the state inside this class depending on the state of the EPOS2">state</a> == <a class="code" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060caf0eea74682d3d3f21bec6e5b376cf443" title="EPOS2 is started but not ready for driving.">disabled</a>) {</div>
<div class="line"></div>
<div class="line">        bit = VCS_SetObject(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, 0x607f, 0x00, &amp;value, 4, &amp;bytesWritten, &amp;errorCode);</div>
<div class="line">        <span class="keywordflow">if</span> (!bit) {</div>
<div class="line">            <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;set max RPM of wheels&quot;</span>, error, bit, errorCode);</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#a7bc89f766fbe9abcb503572714422658" title="[rev/min] highest allowed angular velocity">maxRotationPerMinute</a> = maxRPM;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        ROS_INFO(<span class="stringliteral">&quot;maxRPM set to: %.4lf&quot;</span>, maxRPM);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0a5257b20692de37091544e6ed5f6aed"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Epos2MotorController::setMotorData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structEpos2MotorController_1_1motorData.html">motorData</a> *&#160;</td>
          <td class="paramname"><em>parameter</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>set all Data of the motor into the EPOS2. </p>
<p>changes are only allowed in disabled state. maxPeakCurrent will be the double value of continousCurrent, if continousCurrent is higher than maxPeakCurrent</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*parameter</td><td>structure with all relevant motor data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if successful otherwise 0 </dd></dl>

<p>Definition at line <a class="el" href="Epos2MotorController_8cpp_source.html#l00429">429</a> of file <a class="el" href="Epos2MotorController_8cpp_source.html">Epos2MotorController.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> bit=0;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> errorCode=0, bytesWritten=0;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> value = abs(parameter-&gt;maxRPM);</div>
<div class="line"></div>
<div class="line">    <a class="code" href="classEpos2MotorController.html#a7194b8efd4f2fd5a4d64b10135c416e2" title="the state inside this class depending on the state of the EPOS2">state</a> = <a class="code" href="classEpos2MotorController.html#ac6c31e0dc57485aa817431b22627fc70" title="read out the state of the EPOS2 state machine">getEpos2State</a>();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="classEpos2MotorController.html#a7194b8efd4f2fd5a4d64b10135c416e2" title="the state inside this class depending on the state of the EPOS2">state</a> == <a class="code" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060caf0eea74682d3d3f21bec6e5b376cf443" title="EPOS2 is started but not ready for driving.">disabled</a>) {</div>
<div class="line"></div>
<div class="line">        bit = VCS_SetMotorType(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, MT_DC_MOTOR, &amp;errorCode);</div>
<div class="line">        <span class="keywordflow">if</span> (!bit) { <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;can&#39;t set motorType to brushed DC&quot;</span>, error, bit, errorCode);}</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (parameter-&gt;maxPeakCurrent &lt; parameter-&gt;continuousCurrent) { parameter-&gt;maxPeakCurrent = 2 * parameter-&gt;continuousCurrent;}</div>
<div class="line"></div>
<div class="line">        bit = VCS_SetDcMotorParameter(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, parameter-&gt;continuousCurrent, parameter-&gt;maxPeakCurrent, parameter-&gt;thermalTimeConstantWinding, &amp;errorCode);</div>
<div class="line">        <span class="keywordflow">if</span> (bit != 0) {</div>
<div class="line">            ROS_DEBUG(<span class="stringliteral">&quot;MotorData set %s to: NominalCurrent - %i, PeakCurrent - %i, ThermalTimeConstant - %i&quot;</span>, <a class="code" href="classEpos2MotorController.html#aec7abbd4cd8e70e98f28cae457275e31" title="this appears in front of a message published with ROS.">nodeStr</a>, parameter-&gt;continuousCurrent, parameter-&gt;maxPeakCurrent, parameter-&gt;thermalTimeConstantWinding);</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;couldn&#39;t set DC-Motor parameter&quot;</span>, warn, bit, errorCode);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        bit = VCS_SetObject(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, 0x6410, 0x04, &amp;value, 4, &amp;bytesWritten, &amp;errorCode);</div>
<div class="line">        <span class="keywordflow">if</span> (bit != 0) {</div>
<div class="line">            ROS_DEBUG(<span class="stringliteral">&quot;Maximum Velocity set %s to: %li rpm&quot;</span>, <a class="code" href="classEpos2MotorController.html#aec7abbd4cd8e70e98f28cae457275e31" title="this appears in front of a message published with ROS.">nodeStr</a>, parameter-&gt;maxRPM);</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;couldn&#39;t set maximum RPM of Motor&quot;</span>, warn, bit, errorCode);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a42c80ac11a2d4dfcb4f75a573e017164"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Epos2MotorController::setRegulatorParameter </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structEpos2MotorController_1_1regulator.html">regulator</a> *&#160;</td>
          <td class="paramname"><em>parameter</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>set all parameter of the regulators into the EPOS2. </p>
<p>changes are only allowed in disabled state.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*parameter</td><td>structure with all regulator gain and feedforward values </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if successful otherwise 0 </dd></dl>

<p>Definition at line <a class="el" href="Epos2MotorController_8cpp_source.html#l00680">680</a> of file <a class="el" href="Epos2MotorController_8cpp_source.html">Epos2MotorController.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> bit=0, bit1 = 0;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> errorCode=0, bytesWritten=0;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="classEpos2MotorController.html#a7194b8efd4f2fd5a4d64b10135c416e2" title="the state inside this class depending on the state of the EPOS2">state</a> = <a class="code" href="classEpos2MotorController.html#ac6c31e0dc57485aa817431b22627fc70" title="read out the state of the EPOS2 state machine">getEpos2State</a>();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="classEpos2MotorController.html#a7194b8efd4f2fd5a4d64b10135c416e2" title="the state inside this class depending on the state of the EPOS2">state</a> == <a class="code" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060caf0eea74682d3d3f21bec6e5b376cf443" title="EPOS2 is started but not ready for driving.">disabled</a>) {</div>
<div class="line"></div>
<div class="line">        bit = VCS_SetPositionRegulatorGain(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, (*parameter).positionGain.p, (*parameter).positionGain.i, (*parameter).positionGain.d, &amp;errorCode);</div>
<div class="line">        <span class="keywordflow">if</span> (bit != 0) {</div>
<div class="line">            ROS_INFO(<span class="stringliteral">&quot;PositionGain was set %s to: P - %i, I - %i, D - %i&quot;</span>, <a class="code" href="classEpos2MotorController.html#aec7abbd4cd8e70e98f28cae457275e31" title="this appears in front of a message published with ROS.">nodeStr</a>, (*parameter).positionGain.p, (*parameter).positionGain.i, (*parameter).positionGain.d);</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;couldn&#39;t write Position Gain Values&quot;</span>, warn, bit, errorCode);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        bit = VCS_SetPositionRegulatorFeedForward(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, (*parameter).positionFF.Velocity, (*parameter).positionFF.Acceleration, &amp;errorCode);</div>
<div class="line">        <span class="keywordflow">if</span> (bit != 0) {</div>
<div class="line">            ROS_INFO(<span class="stringliteral">&quot;PositionFeedForward was set %s to: Velocity - %i, Acceleration - %i&quot;</span>, <a class="code" href="classEpos2MotorController.html#aec7abbd4cd8e70e98f28cae457275e31" title="this appears in front of a message published with ROS.">nodeStr</a>, (*parameter).positionFF.Velocity, (*parameter).positionFF.Acceleration);</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;couldn&#39;t write Position FeedForward Values&quot;</span>, warn, bit, errorCode);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        bit = VCS_SetVelocityRegulatorGain(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, (*parameter).velocityGain.p, (*parameter).velocityGain.i, &amp;errorCode);</div>
<div class="line">        <span class="keywordflow">if</span> (bit != 0) {</div>
<div class="line">            ROS_INFO(<span class="stringliteral">&quot;VelocityGain was set %s to: P - %i, I - %i&quot;</span>, <a class="code" href="classEpos2MotorController.html#aec7abbd4cd8e70e98f28cae457275e31" title="this appears in front of a message published with ROS.">nodeStr</a>, (*parameter).velocityGain.p, (*parameter).velocityGain.i);</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;couldn&#39;t write Velocity Gain Values&quot;</span>, warn, bit, errorCode);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        bit = VCS_SetObject(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, 0x60f9, 0x04, (<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *) &amp;(*parameter).velocityFF.Velocity, 2, &amp;bytesWritten, &amp;errorCode);</div>
<div class="line">        bit1 = VCS_SetObject(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, 0x60f9, 0x05, (<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *) &amp;(*parameter).velocityFF.Acceleration, 2, &amp;bytesWritten, &amp;errorCode);</div>
<div class="line">        <span class="keywordflow">if</span> (bit != 0 &amp;&amp; bit1 !=0) {</div>
<div class="line">            ROS_INFO(<span class="stringliteral">&quot;VelocityFeedForward was set %s to: Velocity - %i, Acceleration - %i&quot;</span>, <a class="code" href="classEpos2MotorController.html#aec7abbd4cd8e70e98f28cae457275e31" title="this appears in front of a message published with ROS.">nodeStr</a>, (*parameter).velocityFF.Velocity, (*parameter).velocityFF.Acceleration);</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;couldn&#39;t write Velocity FeedForward Values&quot;</span>, warn, bit, errorCode);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        bit = VCS_SetCurrentRegulatorGain(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, (*parameter).currentGain.p, (*parameter).currentGain.i, &amp;errorCode);</div>
<div class="line">        <span class="keywordflow">if</span> (bit != 0) {</div>
<div class="line">            ROS_INFO(<span class="stringliteral">&quot;CurrentGain was set %s to: P - %i, I - %i&quot;</span>, <a class="code" href="classEpos2MotorController.html#aec7abbd4cd8e70e98f28cae457275e31" title="this appears in front of a message published with ROS.">nodeStr</a>, (*parameter).currentGain.p, (*parameter).currentGain.i);</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;couldn&#39;t write Current Gain Values&quot;</span>, warn, bit, errorCode);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2ff727bd7ad81302c2feaaf297d888ae"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int Epos2MotorController::setSpin </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>reverse</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>set the positive direction of movement into the EPOS2. </p>
<p>changes are only allowed in disabled state.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reverse</td><td>if it's 1 the positive direction is CW otherwise CCW </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if successful otherwise 0 </dd></dl>

<p>Definition at line <a class="el" href="Epos2MotorController_8cpp_source.html#l00733">733</a> of file <a class="el" href="Epos2MotorController_8cpp_source.html">Epos2MotorController.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> bit=0;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> errorCode=0, bytesWritten=0;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> value;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="classEpos2MotorController.html#a7194b8efd4f2fd5a4d64b10135c416e2" title="the state inside this class depending on the state of the EPOS2">state</a> = <a class="code" href="classEpos2MotorController.html#ac6c31e0dc57485aa817431b22627fc70" title="read out the state of the EPOS2 state machine">getEpos2State</a>();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="classEpos2MotorController.html#a7194b8efd4f2fd5a4d64b10135c416e2" title="the state inside this class depending on the state of the EPOS2">state</a> == <a class="code" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060caf0eea74682d3d3f21bec6e5b376cf443" title="EPOS2 is started but not ready for driving.">disabled</a>) {</div>
<div class="line"></div>
<div class="line">        value = (reverse == 1) ? 0x0100 : 0x0000;</div>
<div class="line"></div>
<div class="line">        bit = VCS_SetObject(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, 0x2008, 0x00, &amp;value, 2, &amp;bytesWritten, &amp;errorCode);</div>
<div class="line">        <span class="keywordflow">if</span> (!bit) {</div>
<div class="line">            <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;change Spin&quot;</span>, error, bit, errorCode);</div>
<div class="line">            <span class="keywordflow">return</span> 0;</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            <span class="keywordflow">return</span> 1;</div>
<div class="line">        }</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2e1ad71a3be2943ed7bffd743c4f1fad"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Epos2MotorController::storeSettings </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>stores all changed Settings in the EPOS2. </p>
<p>this should be done after changing settings and before enabling the EPOS2.</p>
<dl class="section return"><dt>Returns</dt><dd>1 if successful otherwise 0 </dd></dl>

<p>Definition at line <a class="el" href="Epos2MotorController_8cpp_source.html#l00211">211</a> of file <a class="el" href="Epos2MotorController_8cpp_source.html">Epos2MotorController.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> bit=0;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> errorCode=0;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="classEpos2MotorController.html#a7194b8efd4f2fd5a4d64b10135c416e2" title="the state inside this class depending on the state of the EPOS2">state</a> = <a class="code" href="classEpos2MotorController.html#ac6c31e0dc57485aa817431b22627fc70" title="read out the state of the EPOS2 state machine">getEpos2State</a>();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="classEpos2MotorController.html#a7194b8efd4f2fd5a4d64b10135c416e2" title="the state inside this class depending on the state of the EPOS2">state</a> == <a class="code" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060caf0eea74682d3d3f21bec6e5b376cf443" title="EPOS2 is started but not ready for driving.">disabled</a>) {</div>
<div class="line"></div>
<div class="line">        bit = VCS_Store(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, &amp;errorCode);</div>
<div class="line">        <span class="keywordflow">if</span> (bit == 0) {</div>
<div class="line">            <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;couldn&#39;t store Parameter&quot;</span>, warn, bit, errorCode);</div>
<div class="line">            <span class="keywordflow">return</span> 0;</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;Parameters saved&quot;</span>);</div>
<div class="line">            <span class="keywordflow">return</span> 1;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a481615a590e6d1c6bf6c39c426e6d9a6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Epos2MotorController::testForErrorsAndPrint </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>read out the error bit and the error history. </p>
<p>If an error was detected a message will be send to rosOUT.</p>
<dl class="section return"><dt>Returns</dt><dd>0 if a DeviceError was detect, else return 1 </dd></dl>

<p>Definition at line <a class="el" href="Epos2MotorController_8cpp_source.html#l00117">117</a> of file <a class="el" href="Epos2MotorController_8cpp_source.html">Epos2MotorController.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> numberOfDeviceError = 0;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> errorCode=0, deviceErrorCode, bytesRead;</div>
<div class="line">    <span class="keywordtype">int</span> bit = 0, bit2 = 0, noError = 1;</div>
<div class="line">    <span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> value=0;</div>
<div class="line"></div>
<div class="line">    bit = VCS_GetObject(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, 0x1001, 0x00, &amp;value, 1, &amp;bytesRead, &amp;errorCode);</div>
<div class="line"></div>
<div class="line">    <span class="comment">//ROS_ERROR(&quot;ErrorValue: %u&quot;, value);</span></div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (bit != 0) {</div>
<div class="line">        <span class="keywordflow">if</span> (value != 0) {</div>
<div class="line">            noError = 0;</div>
<div class="line">            <span class="comment">//first shift until the wanted byte is first, then bitwiseAnd with 0000 0001 and check if it&#39;s zero or one</span></div>
<div class="line">            <span class="keywordflow">if</span> ((value &gt;&gt; 0) &amp; 0x01 == 1) {<a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;DeviceError: Generic error&quot;</span>, error);}</div>
<div class="line">            <span class="keywordflow">if</span> ((value &gt;&gt; 1) &amp; 0x01 == 1) {<a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;DeviceError: Current error&quot;</span>, error);}</div>
<div class="line">            <span class="keywordflow">if</span> ((value &gt;&gt; 2) &amp; 0x01 == 1) {<a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;DeviceError: Voltage error&quot;</span>, error);}</div>
<div class="line">            <span class="keywordflow">if</span> ((value &gt;&gt; 3) &amp; 0x01 == 1) {<a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;DeviceError: Temperature error&quot;</span>, error);}</div>
<div class="line">            <span class="keywordflow">if</span> ((value &gt;&gt; 4) &amp; 0x01 == 1) {<a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;DeviceError: Communication error&quot;</span>, error);}</div>
<div class="line">            <span class="keywordflow">if</span> ((value &gt;&gt; 5) &amp; 0x01 == 1) {<a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;DeviceError: Device profile-specific error&quot;</span>, error);}</div>
<div class="line">            <span class="keywordflow">if</span> ((value &gt;&gt; 7) &amp; 0x01 == 1) {<a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;DeviceError: Motion error&quot;</span>, error);}</div>
<div class="line">        }</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;Couldn&#39;t read internal error Register (0x1001).&quot;</span>, error, 0, errorCode);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    bit = VCS_GetNbOfDeviceError (<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, &amp;numberOfDeviceError, &amp;errorCode);</div>
<div class="line"></div>
<div class="line">    <span class="comment">//ROS_ERROR(&quot;Number of DeviceErrors: %u&quot;, numberOfDeviceError);</span></div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(bit != 0) {</div>
<div class="line">        <span class="keywordflow">if</span> (numberOfDeviceError != 0) {</div>
<div class="line">            noError = 0;</div>
<div class="line">            <span class="comment">//read device error code</span></div>
<div class="line">            <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 1; i &lt;= numberOfDeviceError; i++) {</div>
<div class="line"></div>
<div class="line">                bit2 = VCS_GetDeviceErrorCode(<a class="code" href="classEpos2MotorController.html#a40594faab444bcba221ab9d55d1162cd" title="the device handle for the communication with the EPOS2">devhandle</a>, <a class="code" href="classEpos2MotorController.html#a0856f5fdd71ffa3b84a536afa085bfb1" title="Settings for the EPOS2.">epos2MotorSet</a>.<a class="code" href="structEpos2MotorController_1_1epos2Settings.html#ab8f18d3df17e8de9ed5250a3e53292c6" title="internal NodeNumber of the EPOS2">node</a>, i, &amp;deviceErrorCode, &amp;errorCode);</div>
<div class="line">                <span class="keywordflow">if</span>(bit2 != 0) {</div>
<div class="line">                    <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;The following Error was detected. (ErrorBit = ErrorNumber)&quot;</span>, error, i, deviceErrorCode);</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                    <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;Couldn&#39;t read the deviceError with the Number behind ErrorBit.&quot;</span>, error, i, errorCode);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <a class="code" href="classEpos2MotorController.html#a64d5e3e3858597c111e60ba8b382a63b" title="puts out a text message into ros standard output.">errorOutput</a>(<span class="stringliteral">&quot;Couldn&#39;t read the number of device errors.&quot;</span>, error, bit, errorCode);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> noError;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<h2>Field Documentation</h2>
<a class="anchor" id="aec7abbd4cd8e70e98f28cae457275e31"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* Epos2MotorController::nodeStr</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>this appears in front of a message published with ROS. </p>
<p>If not set it's "EPOS2". </p>

<p>Definition at line <a class="el" href="Epos2MotorController_8h_source.html#l00046">46</a> of file <a class="el" href="Epos2MotorController_8h_source.html">Epos2MotorController.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7194b8efd4f2fd5a4d64b10135c416e2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classEpos2MotorController.html#ab5ec630dfbb90ad674e311187926060c">EposState</a> Epos2MotorController::state</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>the state inside this class depending on the state of the EPOS2 </p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="classEpos2MotorController.html#ac6c31e0dc57485aa817431b22627fc70" title="read out the state of the EPOS2 state machine">getEpos2State()</a> </dd></dl>

<p>Definition at line <a class="el" href="Epos2MotorController_8h_source.html#l00344">344</a> of file <a class="el" href="Epos2MotorController_8h_source.html">Epos2MotorController.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/epos2_control/src/<a class="el" href="Epos2MotorController_8h_source.html">Epos2MotorController.h</a></li>
<li>src/epos2_control/src/<a class="el" href="Epos2MotorController_8cpp_source.html">Epos2MotorController.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jul 16 2013 18:18:40 for EPOS2MotorController by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.2
</small></address>
</body>
</html>
